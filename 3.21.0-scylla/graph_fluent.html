

<!DOCTYPE html>
<html class="no-js" lang="en" style="visibility: hidden;">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             DataStax Graph Fluent API | ScyllaDB Docs 
        </title>
        <meta name="description" content="ScyllaDB is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="_static/img/favicon-228x228.png" />

        
            
            
        

        
            
            <link rel="canonical" href="https://python-driver.docs.scylladb.com/stable/graph_fluent.html"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                  href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>

        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.css">
        <script type="module" src="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.esm.js"></script>
        
        
        
            
                <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
            
        
            
                <link rel="stylesheet" type="text/css" href="_static/css/main.css?v=e3ce25dc" />
            
        
            
                <link rel="stylesheet" type="text/css" href="_static/sphinx_collapse.css?v=226d88b4" />
            
        
            
                <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
            
        
    
        
        
            
        <script type="text/javascript" src="_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="_static/js/main.bundle.js"></script>
        
            
                <script src="_static/documentation_options.js?v=be4f90db"></script>
            
        
            
                <script src="_static/doctools.js?v=9bcbadda"></script>
            
        
            
                <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
            
        
            
                <script src="_static/clipboard.min.js?v=a7894cd8"></script>
            
        
            
                <script src="_static/copybutton.js?v=f281be69"></script>
            
        
    
            
                <!-- Local meta tags -->
            
            
                <!-- Google Tag Manager docs -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-54NWVS4");
</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager global -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
            
        
    </head>

    <body class="brand-product">
        <section class="promo-banner  promo-banner--hide" style="display: none;">
    <div class="promo-banner-wrapper">
        
        <div class="promo-banner__title">ScyllaDB University Live | Free Virtual Training Event</div>
        <a class="promo-banner__button button button--reverse" href="#"
           target="_blank" rel="noopener noreferrer">Learn more</a>
        <button class="promo-banner__close">
            <i class="icon-cancel"></i>
        </button>
    </div>
</section>
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="_static/img/scylladb-logo-horizontal.svg" alt="ScyllaDB Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Deployments <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="icon-docs-cloud"></i>Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/manual/">
                            <i class="icon-server"></i>Server</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="icon-docs-manager"></i>ScyllaDB Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="icon-docs-monitoring"></i>ScyllaDB
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="icon-docs-operator"></i>ScyllaDB Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/manual/stable/using-scylla/drivers/cql-drivers/">
                            <i class="icon-docs-nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/manual/stable/using-scylla/drivers/dynamo-drivers/">
                            <i class="icon-docs-alternator"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Resources
                    <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://university.scylladb.com">
                            <i class="icon-university"></i>
                            ScyllaDB University
                        </a>
                    </li>
                    <li>
                        <a href="https://forum.scylladb.com">
                            <i class="icon-docs-community"></i>
                            Community Forum
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/stable/get-started/develop-with-scylladb/tutorials-example-projects.html">
                            <i class="icon-docs-training"></i>
                            Tutorials
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://docs.scylladb.com/manual/stable/getting-started/installation-common/scylla-web-installer.html" class="button"><i class="icon-download me-2"></i> Install</a>
        </div>
    </div>
    <div class="header-search-box">
        <i class="dark-theme-toggler icon-theme"></i>
        <div class="search-box">
            <ci-search></ci-search>
        </div>
        
            <biel-button class="header-ask-ai" project="ddfdo8m94k" 
                header-title="ScyllaDB chatbot (beta)"
                button-position="default"
                modal-position="bottom-right"
                button-style="dark">
                Ask AI
            </biel-button>
        
    </div>
    <div class="side-nav-toggle">
    <i class="dark-theme-toggler icon-theme"></i>
    <div class="side-nav-toggle__button" data-toggle="side-nav">
        <i class="icon-menu"></i>
    </div>
</div>
</header>
        <div class="title"></div>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://docs.scylladb.com"
           class="bread__highlight">
            <i class="icon-home"></i> ScyllaDB Docs
        </a>
    </span>
    <span class="bread__item">
        <a href="index.html"
           class="bread__highlight">
            Scylla Python Driver
        </a>
    </span>
    
    <span class="bread__item bread__item--last">DataStax Graph Fluent API</span>
</div>
                    </div>
                
                
                <div class="sidebar-right-layout">
                    <div class="body-container">
                

                    <div class="content-body">
                        
                            
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a deprecated version of Scylla Python Driver.
            
            <a href="../stable/index.html">Switch to the latest stable version.</a>
        </p>
    </div>

                        
                        
                        <section id="datastax-graph-fluent-api">
<h1>DataStax Graph Fluent API<a class="headerlink" href="#datastax-graph-fluent-api" title="Link to this heading">¶</a></h1>
<p>The fluent API adds graph features to the core driver:</p>
<ul class="simple">
<li><p>A TinkerPop GraphTraversalSource builder to execute traversals on a DSE cluster</p></li>
<li><p>The ability to execution traversal queries explicitly using execute_graph</p></li>
<li><p>GraphSON serializers for all DSE Graph types.</p></li>
<li><p>DSE Search predicates</p></li>
</ul>
<p>The Graph fluent API depends on Apache TinkerPop and is not installed by default. Make sure
you have the Graph requirements are properly <a class="reference internal" href="installation.html#installation-datastax-graph"><span class="std std-ref">installed</span></a>.</p>
<p>You might be interested in reading the <a class="reference internal" href="graph.html"><span class="doc">DSE Graph Getting Started documentation</span></a> to
understand the basics of creating a graph and its schema.</p>
<section id="graph-traversal-queries">
<h2>Graph Traversal Queries<a class="headerlink" href="#graph-traversal-queries" title="Link to this heading">¶</a></h2>
<p>The driver provides <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Session.execute_graph" title="cassandra.cluster.Session.execute_graph"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute_graph()</span></code></a>, which allows users to execute traversal
query strings. Here is a simple example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">session</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="s2">&quot;g.addV(&#39;genre&#39;).property(&#39;genreId&#39;, 1).property(&#39;name&#39;, &#39;Action&#39;).next();&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Since graph queries can be very complex, working with strings is not very convenient and is
hard to maintain. This fluent API allows you to build Gremlin traversals and write your graph
queries directly in Python. These native traversal queries can be executed explicitly, with
a <cite>Session</cite> object, or implicitly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">dse_session</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;genreId&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Action&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

<span class="c1"># implicit execution caused by iterating over results</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Drama&#39;</span><span class="p">)</span><span class="o">.</span><span class="ow">in</span><span class="p">(</span><span class="s1">&#39;belongsTo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">valueMap</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<p>These <a class="reference internal" href="graph.html#graph-types"><span class="std std-ref">Python types</span></a> are also supported transparently:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;person&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Mike&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1984</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span><span class="o">.</span> \
    <span class="nb">property</span><span class="p">(</span><span class="s1">&#39;house_yard&#39;</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">(((</span><span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span>
</pre></div>
</div>
<p>More readings about Gremlin:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.datastax.com/dev/blog/datastax-drivers-fluent-apis-for-dse-graph-are-out">DataStax Drivers Fluent API</a></p></li>
<li><p><a class="reference external" href="http://tinkerpop.apache.org/docs/current/reference/#gremlin-python">gremlin-python documentation</a></p></li>
</ul>
</section>
<section id="configuring-a-traversal-execution-profile">
<h2>Configuring a Traversal Execution Profile<a class="headerlink" href="#configuring-a-traversal-execution-profile" title="Link to this heading">¶</a></h2>
<p>The fluent api takes advantage of <em>configuration profiles</em> to allow
different execution configurations for the various query handlers. Graph traversal
execution requires a custom execution profile to enable Gremlin-bytecode as
query language. Here is how to accomplish this configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cluster</span><span class="p">,</span> <span class="n">EXEC_PROFILE_GRAPH_DEFAULT</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.datastax.graph.fluent</span><span class="w"> </span><span class="kn">import</span> <span class="n">DseGraph</span>

<span class="n">ep</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">create_execution_profile</span><span class="p">(</span><span class="s1">&#39;graph_name&#39;</span><span class="p">)</span>
<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="n">execution_profiles</span><span class="o">=</span><span class="p">{</span><span class="n">EXEC_PROFILE_GRAPH_DEFAULT</span><span class="p">:</span> <span class="n">ep</span><span class="p">})</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>  <span class="c1"># Build the GraphTraversalSource</span>
<span class="nb">print</span> <span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">toList</span><span class="p">()</span>  <span class="c1"># Traverse the Graph</span>
</pre></div>
</div>
<p>Note that the execution profile created with <code class="xref py py-meth docutils literal notranslate"><span class="pre">DseGraph.create_execution_profile</span></code> cannot
be used for any groovy string queries.</p>
<p>If you want to change execution property defaults, please see the <a class="reference internal" href="execution_profiles.html"><span class="doc">Execution Profile documentation</span></a>
for a more generalized discussion of the API. Graph traversal queries use the same execution profile defined for DSE graph. If you
need to change the default properties, please refer to the <a class="reference internal" href="graph.html"><span class="doc">DSE Graph query documentation page</span></a></p>
</section>
<section id="explicit-graph-traversal-execution-with-a-dse-session">
<h2>Explicit Graph Traversal Execution with a DSE Session<a class="headerlink" href="#explicit-graph-traversal-execution-with-a-dse-session" title="Link to this heading">¶</a></h2>
<p>Traversal queries can be executed explicitly using <cite>session.execute_graph</cite> or <cite>session.execute_graph_async</cite>. These functions
return results as DSE graph types. If you are familiar with DSE queries or need async execution, you might prefer that way.
Below is an example of explicit execution. For this example, assume the schema has been generated as above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.datastax.graph.fluent</span><span class="w"> </span><span class="kn">import</span> <span class="n">DseGraph</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pprint</span>

<span class="c1"># create a tinkerpop graphson2 ExecutionProfile</span>
<span class="n">ep</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">create_execution_profile</span><span class="p">(</span><span class="s1">&#39;graph_name&#39;</span><span class="p">)</span>
<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="n">execution_profiles</span><span class="o">=</span><span class="p">{</span><span class="n">EXEC_PROFILE_GRAPH_DEFAULT</span><span class="p">:</span> <span class="n">ep</span><span class="p">})</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
<span class="n">addV_query</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">query_from_traversal</span><span class="p">(</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;genreId&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Action&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">v_query</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">query_from_traversal</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">())</span>

<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="n">addV_query</span><span class="p">):</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="n">v_query</span><span class="p">):</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="implicit-graph-traversal-execution-with-tinkerpop">
<h2>Implicit Graph Traversal Execution with TinkerPop<a class="headerlink" href="#implicit-graph-traversal-execution-with-tinkerpop" title="Link to this heading">¶</a></h2>
<p>Using the <code class="xref py py-class docutils literal notranslate"><span class="pre">DseGraph</span></code> class, you can build a GraphTraversalSource
that will execute queries on a DSE session without explicitly passing anything to
that session. We call this <em>implicit execution</em> because the <cite>Session</cite> is not
explicitly involved. Everything is managed internally by TinkerPop while
traversing the graph and the results are TinkerPop types as well.</p>
<section id="synchronous-example">
<h3>Synchronous Example<a class="headerlink" href="#synchronous-example" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the GraphTraversalSource</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
<span class="c1"># implicitly execute the query by traversing the TraversalSource</span>
<span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;genreId&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Action&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

<span class="c1"># blocks until the query is completed and return the results</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">toList</span><span class="p">()</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="asynchronous-exemple">
<h3>Asynchronous Exemple<a class="headerlink" href="#asynchronous-exemple" title="Link to this heading">¶</a></h3>
<p>You can execute a graph traversal query asynchronously by using <cite>.promise()</cite>. It returns a
python <a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Future">Future</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build the GraphTraversalSource</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
<span class="c1"># implicitly execute the query by traversing the TraversalSource</span>
<span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;genreId&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Action&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>  <span class="c1"># not async</span>

<span class="c1"># get a future and wait</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">promise</span><span class="p">()</span>
<span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="c1"># or set a callback</span>
<span class="k">def</span><span class="w"> </span><span class="nf">cb</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">promise</span><span class="p">()</span>
<span class="n">future</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="n">cb</span><span class="p">)</span>
<span class="c1"># do other stuff...</span>
</pre></div>
</div>
</section>
</section>
<section id="specify-the-execution-profile-explicitly">
<h2>Specify the Execution Profile explicitly<a class="headerlink" href="#specify-the-execution-profile-explicitly" title="Link to this heading">¶</a></h2>
<p>If you don’t want to change the default graph execution profile (<cite>EXEC_PROFILE_GRAPH_DEFAULT</cite>), you can register a new
one as usual and use it explicitly. Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cluster</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.datastax.graph.fluent</span><span class="w"> </span><span class="kn">import</span> <span class="n">DseGraph</span>

<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">()</span>
<span class="n">ep</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">create_execution_profile</span><span class="p">(</span><span class="s1">&#39;graph_name&#39;</span><span class="p">)</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">add_execution_profile</span><span class="p">(</span><span class="s1">&#39;graph_traversal&#39;</span><span class="p">,</span> <span class="n">ep</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">()</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">query_from_traversal</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">())</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">execution_profile</span><span class="o">=</span><span class="s1">&#39;graph_traversal&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also create multiple GraphTraversalSources and use them with
the same execution profile (for different graphs):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">g_movies</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">graph_name</span><span class="o">=</span><span class="s1">&#39;movies&#39;</span><span class="p">,</span> <span class="n">ep</span><span class="p">)</span>
<span class="n">g_series</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">graph_name</span><span class="o">=</span><span class="s1">&#39;series&#39;</span><span class="p">,</span> <span class="n">ep</span><span class="p">)</span>

<span class="nb">print</span> <span class="n">g_movies</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">toList</span><span class="p">()</span>  <span class="c1"># Traverse the movies Graph</span>
<span class="nb">print</span> <span class="n">g_series</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">toList</span><span class="p">()</span>  <span class="c1"># Traverse the series Graph</span>
</pre></div>
</div>
</section>
<section id="batch-queries">
<h2>Batch Queries<a class="headerlink" href="#batch-queries" title="Link to this heading">¶</a></h2>
<p>DSE Graph supports batch queries using a <code class="xref py py-class docutils literal notranslate"><span class="pre">TraversalBatch</span></code> object
instantiated with <code class="xref py py-meth docutils literal notranslate"><span class="pre">DseGraph.batch</span></code>. A <code class="xref py py-class docutils literal notranslate"><span class="pre">TraversalBatch</span></code> allows
you to execute multiple graph traversals in a single atomic transaction. A
traversal batch is executed with <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Session.execute_graph" title="cassandra.cluster.Session.execute_graph"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute_graph()</span></code></a> or using
<code class="xref py py-meth docutils literal notranslate"><span class="pre">TraversalBatch.execute</span></code> if bounded to a DSE session.</p>
<p>Either way you choose to execute the traversal batch, you need to configure
the execution profile accordingly. Here is a example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cluster</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.datastax.graph.fluent</span><span class="w"> </span><span class="kn">import</span> <span class="n">DseGraph</span>

<span class="n">ep</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">create_execution_profile</span><span class="p">(</span><span class="s1">&#39;graph_name&#39;</span><span class="p">)</span>
<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="n">execution_profiles</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;graphson2&#39;</span><span class="p">:</span> <span class="n">ep</span><span class="p">})</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">()</span>
</pre></div>
</div>
<p>To execute the batch using <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Session.execute_graph" title="cassandra.cluster.Session.execute_graph"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute_graph()</span></code></a>, you need to convert
the batch to a GraphStatement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">batch</span><span class="p">()</span>

<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;genreId&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Action&#39;</span><span class="p">))</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;genreId&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Drama&#39;</span><span class="p">))</span>  <span class="c1"># Don&#39;t use `.next()` with a batch</span>

<span class="n">graph_statement</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">as_graph_statement</span><span class="p">()</span>
<span class="n">graph_statement</span><span class="o">.</span><span class="n">is_idempotent</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># configure any Statement parameters if needed...</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="n">graph_statement</span><span class="p">,</span> <span class="n">execution_profile</span><span class="o">=</span><span class="s1">&#39;graphson2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To execute the batch using <code class="xref py py-meth docutils literal notranslate"><span class="pre">TraversalBatch.execute</span></code>, you need to bound the batch to a DSE session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">batch</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="s1">&#39;graphson2&#39;</span><span class="p">)</span>  <span class="c1"># bound the session and execution profile</span>

<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;genreId&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Action&#39;</span><span class="p">))</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">g</span><span class="o">.</span><span class="n">addV</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;genreId&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">property</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Drama&#39;</span><span class="p">))</span>  <span class="c1"># Don&#39;t use `.next()` with a batch</span>

<span class="n">batch</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="dsl-domain-specific-languages">
<h2>DSL (Domain Specific Languages)<a class="headerlink" href="#dsl-domain-specific-languages" title="Link to this heading">¶</a></h2>
<p>DSL are very useful to write better domain-specific APIs and avoiding
code duplication. Let’s say we have a graph of <cite>People</cite> and we produce
a lot of statistics based on age. All graph traversal queries of our
application would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">hasLabel</span><span class="p">(</span><span class="s2">&quot;people&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">21</span><span class="p">))</span><span class="o">...</span>
</pre></div>
</div>
<p>which is not really verbose and quite annoying to repeat in a code base. Let’s create a DSL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">gremlin_python.process.graph_traversal</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphTraversal</span><span class="p">,</span> <span class="n">GraphTraversalSource</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyAppTraversal</span><span class="p">(</span><span class="n">GraphTraversal</span><span class="p">):</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">younger_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">lt</span><span class="p">(</span><span class="n">age</span><span class="p">))</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">older_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="n">age</span><span class="p">))</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyAppTraversalSource</span><span class="p">(</span><span class="n">GraphTraversalSource</span><span class="p">):</span>

  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">(</span><span class="n">MyAppTraversalSource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">graph_traversal</span> <span class="o">=</span> <span class="n">MyAppTraversal</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">people</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_graph_traversal</span><span class="p">()</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">hasLabel</span><span class="p">(</span><span class="s2">&quot;people&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, we can use our DSL that is a lot cleaner:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.datastax.graph.fluent</span><span class="w"> </span><span class="kn">import</span> <span class="n">DseGraph</span>

<span class="c1"># ...</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span> <span class="n">traversal_class</span><span class="o">=</span><span class="n">MyAppTraversalsource</span><span class="p">)</span>

<span class="n">g</span><span class="o">.</span><span class="n">people</span><span class="p">()</span><span class="o">.</span><span class="n">younger_than</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span><span class="o">...</span>
<span class="n">g</span><span class="o">.</span><span class="n">people</span><span class="p">()</span><span class="o">.</span><span class="n">older_than</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">...</span>
</pre></div>
</div>
<p>To see a more complete example of DSL, see the <a class="reference external" href="https://github.com/datastax/graph-examples/tree/master/killrvideo/dsl/python">Python killrvideo DSL app</a></p>
</section>
<section id="search">
<h2>Search<a class="headerlink" href="#search" title="Link to this heading">¶</a></h2>
<p>DSE Graph can use search indexes that take advantage of DSE Search functionality for
efficient traversal queries. Here are the list of additional search predicates:</p>
<p>Text tokenization:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">token</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">token_prefix</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">token_regex</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">token_fuzzy</span></code></p></li>
</ul>
<p>Text match:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">prefix</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">regex</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">fuzzy</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">phrase</span></code></p></li>
</ul>
<p>Geo:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">inside</span></code></p></li>
</ul>
<section id="create-search-indexes">
<h3>Create search indexes<a class="headerlink" href="#create-search-indexes" title="Link to this heading">¶</a></h3>
<p>For text tokenization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="s2">&quot;schema.vertexLabel(&#39;my_vertex_label&#39;).index(&#39;search&#39;).search().by(&#39;text_field&#39;).asText().add()&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For text match:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="s2">&quot;schema.vertexLabel(&#39;my_vertex_label&#39;).index(&#39;search&#39;).search().by(&#39;text_field&#39;).asString().add()&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For geospatial:</p>
<p>You can create a geospatial index on Point and LineString fields.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="s2">&quot;schema.vertexLabel(&#39;my_vertex_label&#39;).index(&#39;search&#39;).search().by(&#39;point_field&#39;).add()&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-search-indexes">
<h3>Using search indexes<a class="headerlink" href="#using-search-indexes" title="Link to this heading">¶</a></h3>
<p>Token:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.datastax.graph.fluent.predicates</span><span class="w"> </span><span class="kn">import</span> <span class="n">Search</span>
<span class="c1"># ...</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">()</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">query_from_traversal</span><span class="p">(</span>
    <span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s1">&#39;my_vertex_label&#39;</span><span class="p">,</span><span class="s1">&#39;text_field&#39;</span><span class="p">,</span> <span class="n">Search</span><span class="o">.</span><span class="n">token_regex</span><span class="p">(</span><span class="s1">&#39;Hello.+World&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s1">&#39;text_field&#39;</span><span class="p">))</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</pre></div>
</div>
<p>Text:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.datastax.graph.fluent.predicates</span><span class="w"> </span><span class="kn">import</span> <span class="n">Search</span>
<span class="c1"># ...</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">()</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">query_from_traversal</span><span class="p">(</span>
    <span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s1">&#39;my_vertex_label&#39;</span><span class="p">,</span><span class="s1">&#39;text_field&#39;</span><span class="p">,</span> <span class="n">Search</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s1">&#39;text_field&#39;</span><span class="p">))</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</pre></div>
</div>
<p>Geospatial:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.datastax.graph.fluent.predicates</span><span class="w"> </span><span class="kn">import</span> <span class="n">Geo</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">Distance</span>
<span class="c1"># ...</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">traversal_source</span><span class="p">()</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">DseGraph</span><span class="o">.</span><span class="n">query_from_traversal</span><span class="p">(</span>
    <span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s1">&#39;my_vertex_label&#39;</span><span class="p">,</span><span class="s1">&#39;point_field&#39;</span><span class="p">,</span> <span class="n">Geo</span><span class="o">.</span><span class="n">inside</span><span class="p">(</span><span class="n">Distance</span><span class="p">(</span><span class="mi">46</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s1">&#39;point_field&#39;</span><span class="p">))</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute_graph</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</pre></div>
</div>
<p>For more details, please refer to the official <a class="reference external" href="https://docs.datastax.com/en/dse/6.7/dse-admin/datastax_enterprise/search/searchReference.html">DSE Search Indexes Documentation</a></p>
</section>
</section>
</section>

                    </div>
                    
                        <div class="post-content">
                            
    <div class="feedback-container">
        <p class="feedback-container__title">Was this page helpful?</p>
        <span data-tooltip tabindex="1" title="Yes" data-position="top">
            <button class="feedback-container__button" id="feedback-positive">
                <i class="feedback-container__icon icon-docs-thumbs-up"></i>
            </button>
        </span>
        <span data-tooltip tabindex="1" title="No" data-position="top">
            <button class="feedback-container__button" id="feedback-negative">
                <i class="feedback-container__icon icon-docs-thumbs-down"></i>
            </button>
        </span>
        <div class="feedback-container__message" id="feedback-message"></div>
    </div>

    <script>
        function resetFeedbackButtonActive() {
            const feedbackButtons = document.getElementsByClassName('feedback-container__button');
            for (let i = 0; i < feedbackButtons.length; i++) {
                feedbackButtons[i].classList.remove('active');
            }
        }

        function showMessage(liked) {
            const feedbackMessage = document.getElementById('feedback-message');
            const themeGithubRepository = true;
            let message = 'Great! Thanks for your feedback.';
            if (themeGithubRepository && !liked) {
                message = "Thanks for your feedback! Please don't hesitate to <a href='https://github.com/scylladb/python-driver/issues/new?title=docs:%20Issue on page DataStax Graph Fluent API&&body=I%20would%20like%20to%20report%20an%20issue%20on%20page%20https://python-driver.docs.scylladb.com/3.21.0-scylla/graph_fluent%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation'>create an issue</a> if you have any suggestions on how we can improve.";
            }
            feedbackMessage.innerHTML = message;
        }

        function sendGaEvent(liked) {
            const event_label = liked ? "positive" : "negative";
            const event = "feedback_" + event_label;
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                'event': event,
            });
        }

        const positiveFeebackButton = document.getElementById('feedback-positive');
        const negativeFeedbackButton = document.getElementById('feedback-negative');

        positiveFeebackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(true);
            showMessage(true);
            positiveFeebackButton.classList.add('active');
        });

        negativeFeedbackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(false);
            showMessage(false);
            negativeFeedbackButton.classList.add('active');
        });
    </script>

                            <div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="graph.html">
                <button class="navigation__button">
                    <i class="icon-chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />DataStax Graph Queries
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="dates_and_times.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Working with Dates and Times
                </div>
                <button class="navigation__button">
                    <i class="icon-chevron-right"></i>
                </button>
            </a>
        
    </div>
</div>
                            <div class="notice">
<p>
ScyllaDB Python Driver is available under the <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache v2 License</a>.
ScyllaDB Python Driver is a fork of <a href="https://github.com/datastax/python-driver">DataStax Python Driver</a>.
See Copyright <a href="https://python-driver.docs.scylladb.com/stable/#copyright">here</a>.</p>
</div>
                        </div>
                    
                
                
                    </div>
                        <div class="sidebar-right large-order-3">
                            <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a class="button button-sm" href="https://github.com/scylladb/python-driver/issues/new?title=docs:%20Issue on page DataStax Graph Fluent API&&body=I%20would%20like%20to%20report%20an%20issue%20on%20page%20https://python-driver.docs.scylladb.com/3.21.0-scylla/graph_fluent%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation"
               target="_blank">
                <i class="icon-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                <a class="button button-sm" href="https://github.com/scylladb/python-driver/edit/master/docs/graph_fluent.rst"
                   target="_blank">
                    <i class="icon-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">DataStax Graph Fluent API</a><ul>
<li><a class="reference internal" href="#graph-traversal-queries">Graph Traversal Queries</a></li>
<li><a class="reference internal" href="#configuring-a-traversal-execution-profile">Configuring a Traversal Execution Profile</a></li>
<li><a class="reference internal" href="#explicit-graph-traversal-execution-with-a-dse-session">Explicit Graph Traversal Execution with a DSE Session</a></li>
<li><a class="reference internal" href="#implicit-graph-traversal-execution-with-tinkerpop">Implicit Graph Traversal Execution with TinkerPop</a><ul>
<li><a class="reference internal" href="#synchronous-example">Synchronous Example</a></li>
<li><a class="reference internal" href="#asynchronous-exemple">Asynchronous Exemple</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specify-the-execution-profile-explicitly">Specify the Execution Profile explicitly</a></li>
<li><a class="reference internal" href="#batch-queries">Batch Queries</a></li>
<li><a class="reference internal" href="#dsl-domain-specific-languages">DSL (Domain Specific Languages)</a></li>
<li><a class="reference internal" href="#search">Search</a><ul>
<li><a class="reference internal" href="#create-search-indexes">Create search indexes</a></li>
<li><a class="reference internal" href="#using-search-indexes">Using search indexes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    
</div>
                        </div>
                    </div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="icon-docs-menu-collapse"></i>
    </button>
    <div class="side-nav-content custom-scroll-bar">
        <div class="side-nav__title">
            <a href="index.html">Scylla Python Driver</a>
        </div>
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions"><ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
    <li class="scylla-dropdown__item">
        <a class="scylla-dropdown__title" href="#">
            
                3.21.0
            
            <i class="chevron icon-docs-chevron-right"></i>
        </a>
        <ul class="menu scylla-dropdown__content">
            
                
            
            
                
                    <li>
                        <a href="../stable/index.html">
                            3.28.2
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.28.1-scylla/index.html">
                            3.28.1
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.28.0-scylla/index.html">
                            3.28.0
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.26.9-scylla/graph_fluent.html">
                            3.26.9
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.25.11-scylla/graph_fluent.html">
                            3.25.11
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.25.4-scylla/graph_fluent.html">
                            3.25.4
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.24.8-scylla/graph_fluent.html">
                            3.24.8
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.22.3-scylla/graph_fluent.html">
                            3.22.3
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="graph_fluent.html">
                            3.21.0
                        </a>
                    </li>
                
            
        </ul>
    </li>
</ul></div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="api/index.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cassandra</span></code> - Exceptions and Enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cluster.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> - Clusters and Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/policies.html"><code class="docutils literal notranslate"><span class="pre">cassandra.policies</span></code> - Load balancing and Failure Handling Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/auth.html"><code class="docutils literal notranslate"><span class="pre">cassandra.auth</span></code> - Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/graph.html"><code class="docutils literal notranslate"><span class="pre">cassandra.graph</span></code> - Graph Statements, Options, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/metadata.html"><code class="docutils literal notranslate"><span class="pre">cassandra.metadata</span></code> - Schema and Ring Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/metrics.html"><code class="docutils literal notranslate"><span class="pre">cassandra.metrics</span></code> - Performance Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/query.html"><code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code> - Prepared Statements, Batch Statements, Tracing, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/pool.html"><code class="docutils literal notranslate"><span class="pre">cassandra.pool</span></code> - Hosts and Connection Pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/protocol.html"><code class="docutils literal notranslate"><span class="pre">cassandra.protocol</span></code> - Protocol Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/encoder.html"><code class="docutils literal notranslate"><span class="pre">cassandra.encoder</span></code> - Encoders for non-prepared Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/decoder.html"><code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> - Data Return Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/concurrent.html"><code class="docutils literal notranslate"><span class="pre">cassandra.concurrent</span></code> - Utilities for Concurrent Statement Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/connection.html"><code class="docutils literal notranslate"><span class="pre">cassandra.connection</span></code> - Low Level Connection Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/util.html"><code class="docutils literal notranslate"><span class="pre">cassandra.util</span></code> - Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/timestamps.html"><code class="docutils literal notranslate"><span class="pre">cassandra.timestamps</span></code> - Timestamp Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/asyncioreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.asyncioreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/asyncorereactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.asyncorereactor</span></code> - <code class="docutils literal notranslate"><span class="pre">asyncore</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/eventletreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.eventletreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">eventlet</span></code>-compatible Connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/libevreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.libevreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">libev</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/geventreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.geventreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">gevent</span></code>-compatible Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/twistedreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.twistedreactor</span></code> - Twisted Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/models.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.models</span></code> - Table models for object mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/columns.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.columns</span></code> - Column types for object mapping models</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/query.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.query</span></code> - Query and filter model objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/connection.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.connection</span></code> - Connection management for cqlengine</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/management.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.management</span></code> - Schema management for cqlengine</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/usertype.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.usertype</span></code> - Model classes for User Defined Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/datastax/graph/index.html"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph</span></code> - Graph Statements, Options, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/datastax/graph/fluent/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/datastax/graph/fluent/query.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent.query</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/datastax/graph/fluent/predicates.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent.predicates</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="upgrading.html">Upgrading</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon-chevron-right"></i></label><div class="break"></div><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="execution_profiles.html">Execution Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="query_paging.html">Paging Large Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="lwt.html">Lightweight Transactions (Compare-and-set)</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_defined_types.html">User Defined Types</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="object_mapper.html">Object Mapper</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/upgrade_guide.html">Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/queryset.html">Making Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/batches.html">Batch Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/connections.html">Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/third_party.html">Third party integrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/faq.html">Frequently Asked Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="geo_types.html">DSE Geometry Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph.html">DataStax Graph Queries</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">DataStax Graph Fluent API</a></li>
<li class="toctree-l1"><a class="reference internal" href="dates_and_times.html">Working with Dates and Times</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com"></a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/" target="_blank">Docs</a>
                <a class="footer-links__link" href="https://docs.scylladb.com/stable/get-started/develop-with-scylladb/tutorials-example-projects.html" target="_blank">Tutorials</a>
                <a class="footer-links__link" href="https://university.scylladb.com/" target="_blank">University</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/"
                    target="_blank">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/" target="_blank">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <i class="icon-slack"></i>
                    </span>
                </a>
                <a class="footer-actions__link" href="https://forum.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="Community forum" data-position="bottom">
                        <i class="icon-docs-community"></i>
                    </span>
                </a>
            </div>
        </div>

        
        <div class="footer-copyright">
            
                
                    &#169; ScyllaDB 2021 and © DataStax 2013-2017
                
                | <a class="footer-copyright__link" href="https://www.scylladb.com/tos/" target="_blank">Terms of Service</a>
                | <a class="footer-copyright__link" href="https://www.scylladb.com/privacy/" target="_blank">Privacy Policy</a>
                | ScyllaDB, and ScyllaDB Cloud, are registered trademarks of ScyllaDB, Inc.
            
        </div>
    


        <div class="footer-bottom">
            
            <div class="footer-bottom__version">
                Powered by
                <a class="footer-bottom__link" href="http://sphinx-doc.org/">Sphinx 8.2.3</a> &amp;
                <a class="footer-bottom__link" href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.8.8</a>
            </div>
        </div>
    </div>
    
        <biel-button class="footer-ask-ai" project="ddfdo8m94k" 
            header-title="ScyllaDB chatbot (beta)"
            button-position="bottom-right"
            modal-position="bottom-right"
            button-style="dark">
            Ask AI
        </biel-button>
    
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                    style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>