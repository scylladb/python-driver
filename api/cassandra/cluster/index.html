


<!doctype html>
<html class="no-js" lang="en">
  
<head><!-- begin head.html -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
    <code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> - Clusters and Sessions | Scylla Docs
    </title>
    <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />

    <link rel="icon" href="../../../_static/img/favicon.ico" type="image/x-icon"/>
    <link rel="canonical" href="https://docs.scylladb.com/">

    <link rel="author" href="mailto:info@scylladb.com">
    <link rel="stylesheet" href="../../../_static/css/doc/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/doc/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../../../_static/copybutton.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script src="../../../_static/js/vendor/modernizr.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T8P2JP');</script>
    <!-- End Google Tag Manager -->

    <!-- Marketo -->
    <script type="text/javascript"> (function() { var didInit = false; function initMunchkin() { if(didInit === false) { didInit = true; Munchkin.init('791-QBF-350'); } } var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//munchkin.marketo.net/munchkin.js'; s.onreadystatechange = function() { if (this.readyState == 'complete' || this.readyState == 'loaded') { initMunchkin(); } }; s.onload = initMunchkin; document.getElementsByTagName('head')[0].appendChild(s); })(); </script>
    <!-- End Marketo -->

<!-- end head.html -->
</head>

<body>
<header id="header" class="animated">
    <div class="topbar_continer contain-to-grid clearfix">
        <nav class="top-bar" id="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <div class="logo">
                        <a href="https://docs.scylladb.com/"><img src="../../../_static/img/logo-scylla-docs.svg" alt="" width="151"></a>
                    </div>
                </li>
                <li class="toggle-topbar"><a href="#"><span class="icon-manu"></span></a></li>
            </ul>
            <section class="top-bar-section clearfix">
                <ul class="right">
                    
                    <li>
                        <a href="/">Scylla Python Driver</a>
                    </li>
                    
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">Scylla Cloud</a>
                    </li>
                    
                    <li>
                        <a href="https://university.scylladb.com/">Scylla University</a>
                    </li>
                    
                    <li>
                        <a href="https://www.scylladb.com/">ScyllaDB Home</a>
                    </li>
                    
                    <li class="search_continer show-for-medium-up">	
                        <ci-search></ci-search>	
                    </li>	
                </ul>
            </section>
        </nav>
    </div>
</header>
<section id="content">
    <div class="row">
	
	<div class="large-6 large-push-3 columns">
            

            <div class="section" id="module-cassandra.cluster">
<span id="cassandra-cluster-clusters-and-sessions"></span><h1><code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> - Clusters and Sessions<a class="headerlink" href="#module-cassandra.cluster" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="cassandra.cluster.Cluster">
<em class="property">class </em><code class="descclassname">cassandra.cluster.</code><code class="descname">Cluster</code><span class="sig-paren">(</span><em>[contact_points=('127.0.0.1',)][, port=9042][, executor_threads=2], **attr_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>The main class to use when interacting with a Cassandra cluster.
Typically, one instance of this class will be created for each
separate Cassandra cluster that your application interacts with.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cassandra.cluster</span> <span class="kn">import</span> <span class="n">Cluster</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">([</span><span class="s1">&#39;192.168.1.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.1.2&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE KEYSPACE ...&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Cluster</span></code> and <code class="docutils literal notranslate"><span class="pre">Session</span></code> also provide context management functions
which implicitly handle shutdown when leaving scope.</p>
<p><code class="docutils literal notranslate"><span class="pre">executor_threads</span></code> defines the number of threads in a pool for handling asynchronous tasks such as
extablishing connection pools or refreshing metadata.</p>
<p>Any of the mutable Cluster attributes may be set as keyword arguments to the constructor.</p>
<dl class="attribute">
<dt id="cassandra.cluster.Cluster.contact_points">
<code class="descname">contact_points</code><em class="property"> = ['127.0.0.1']</em><a class="headerlink" href="#cassandra.cluster.Cluster.contact_points" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of contact points to try connecting for cluster discovery. A
contact point can be a string (ip, hostname) or a
<a class="reference internal" href="../connection/#cassandra.connection.EndPoint" title="cassandra.connection.EndPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">connection.EndPoint</span></code></a> instance.</p>
<p>Defaults to loopback interface.</p>
<p>Note: When using <code class="xref py py-class docutils literal notranslate"><span class="pre">DCAwareLoadBalancingPolicy</span></code> with no explicit
local_dc set (as is the default), the DC is chosen from an arbitrary
host in contact_points. In this case, contact_points should contain
only nodes from a single, local DC.</p>
<p>Note: In the next major version, if you specify contact points, you will
also be required to also explicitly specify a load-balancing policy. This
change will help prevent cases where users had hard-to-debug issues
surrounding unintuitive default load-balancing policy behavior.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.port">
<code class="descname">port</code><em class="property"> = 9042</em><a class="headerlink" href="#cassandra.cluster.Cluster.port" title="Permalink to this definition">¶</a></dt>
<dd><p>The server-side port to open connections to. Defaults to 9042.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.cql_version">
<code class="descname">cql_version</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.cql_version" title="Permalink to this definition">¶</a></dt>
<dd><p>If a specific version of CQL should be used, this may be set to that
string version.  Otherwise, the highest CQL version supported by the
server will be automatically used.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.protocol_version">
<code class="descname">protocol_version</code><em class="property"> = 66</em><a class="headerlink" href="#cassandra.cluster.Cluster.protocol_version" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum version of the native protocol to use.</p>
<p>See <a class="reference internal" href="../#cassandra.ProtocolVersion" title="cassandra.ProtocolVersion"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProtocolVersion</span></code></a> for more information about versions.</p>
<p>If not set in the constructor, the driver will automatically downgrade
version based on a negotiation with the server, but it is most efficient
to set this to the maximum supported by your version of Cassandra.
Setting this will also prevent conflicting versions negotiated if your
cluster is upgraded.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.compression">
<code class="descname">compression</code><em class="property"> = True</em><a class="headerlink" href="#cassandra.cluster.Cluster.compression" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls compression for communications between the driver and Cassandra.
If left as the default of <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>, either lz4 or snappy compression
may be used, depending on what is supported by both the driver
and Cassandra.  If both are fully supported, lz4 will be preferred.</p>
<p>You may also set this to ‘snappy’ or ‘lz4’ to request that specific
compression type.</p>
<p>Setting this to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code> disables compression.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.auth_provider">
<code class="descname">auth_provider</code><a class="headerlink" href="#cassandra.cluster.Cluster.auth_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>When <a class="reference internal" href="#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> is 2 or higher, this should
be an instance of a subclass of <a class="reference internal" href="../auth/#cassandra.auth.AuthProvider" title="cassandra.auth.AuthProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">AuthProvider</span></code></a>,
such as <a class="reference internal" href="../auth/#cassandra.auth.PlainTextAuthProvider" title="cassandra.auth.PlainTextAuthProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlainTextAuthProvider</span></code></a>.</p>
<p>When <a class="reference internal" href="#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> is 1, this should be
a function that accepts one argument, the IP address of a node,
and returns a dict of credentials for that node.</p>
<p>When not using authentication, this should be left as <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.load_balancing_policy">
<code class="descname">load_balancing_policy</code><a class="headerlink" href="#cassandra.cluster.Cluster.load_balancing_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="../policies/#cassandra.policies.LoadBalancingPolicy" title="cassandra.policies.LoadBalancingPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.LoadBalancingPolicy</span></code></a> or
one of its subclasses.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6.0.</span></p>
</div>
<p>Defaults to <a class="reference internal" href="../policies/#cassandra.policies.TokenAwarePolicy" title="cassandra.policies.TokenAwarePolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">TokenAwarePolicy</span></code></a> (<a class="reference internal" href="../policies/#cassandra.policies.DCAwareRoundRobinPolicy" title="cassandra.policies.DCAwareRoundRobinPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">DCAwareRoundRobinPolicy</span></code></a>).
when using CPython (where the murmur3 extension is available). <a class="reference internal" href="../policies/#cassandra.policies.DCAwareRoundRobinPolicy" title="cassandra.policies.DCAwareRoundRobinPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">DCAwareRoundRobinPolicy</span></code></a>
otherwise. Default local DC will be chosen from contact points.</p>
<p><strong>Please see</strong> <a class="reference internal" href="../policies/#cassandra.policies.DCAwareRoundRobinPolicy" title="cassandra.policies.DCAwareRoundRobinPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">DCAwareRoundRobinPolicy</span></code></a> <strong>for a discussion on default behavior with respect to
DC locality and remote nodes.</strong></p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.reconnection_policy">
<code class="descname">reconnection_policy</code><em class="property"> = &lt;cassandra.policies.ExponentialReconnectionPolicy object&gt;</em><a class="headerlink" href="#cassandra.cluster.Cluster.reconnection_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="../policies/#cassandra.policies.ReconnectionPolicy" title="cassandra.policies.ReconnectionPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.ReconnectionPolicy</span></code></a>. Defaults to an instance
of <a class="reference internal" href="../policies/#cassandra.policies.ExponentialReconnectionPolicy" title="cassandra.policies.ExponentialReconnectionPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialReconnectionPolicy</span></code></a> with a base delay of one second and
a max delay of ten minutes.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.default_retry_policy">
<code class="descname">default_retry_policy</code><em class="property"> = &lt;cassandra.policies.RetryPolicy object&gt;</em><a class="headerlink" href="#cassandra.cluster.Cluster.default_retry_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>A default <a class="reference internal" href="../policies/#cassandra.policies.RetryPolicy" title="cassandra.policies.RetryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.RetryPolicy</span></code></a> instance to use for all
<a class="reference internal" href="../query/#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a> objects which do not have a <a class="reference internal" href="../query/#cassandra.query.Statement.retry_policy" title="cassandra.query.Statement.retry_policy"><code class="xref py py-attr docutils literal notranslate"><span class="pre">retry_policy</span></code></a>
explicitly set.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.conviction_policy_factory">
<code class="descname">conviction_policy_factory</code><em class="property"> = &lt;class 'cassandra.policies.SimpleConvictionPolicy'&gt;</em><a class="headerlink" href="#cassandra.cluster.Cluster.conviction_policy_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>A factory function which creates instances of
<a class="reference internal" href="../policies/#cassandra.policies.ConvictionPolicy" title="cassandra.policies.ConvictionPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.ConvictionPolicy</span></code></a>.  Defaults to
<a class="reference internal" href="../policies/#cassandra.policies.SimpleConvictionPolicy" title="cassandra.policies.SimpleConvictionPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.SimpleConvictionPolicy</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.address_translator">
<code class="descname">address_translator</code><em class="property"> = &lt;cassandra.policies.IdentityTranslator object&gt;</em><a class="headerlink" href="#cassandra.cluster.Cluster.address_translator" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="../policies/#cassandra.policies.AddressTranslator" title="cassandra.policies.AddressTranslator"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.AddressTranslator</span></code></a> instance to be used in translating server node addresses
to driver connection addresses.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.metrics_enabled">
<code class="descname">metrics_enabled</code><em class="property"> = False</em><a class="headerlink" href="#cassandra.cluster.Cluster.metrics_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether or not metric collection is enabled.  If enabled, <a class="reference internal" href="#cassandra.cluster.Cluster.metrics" title="cassandra.cluster.Cluster.metrics"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metrics</span></code></a>
will be an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">Metrics</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.metrics">
<code class="descname">metrics</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.metrics.Metrics</span></code> if <a class="reference internal" href="#cassandra.cluster.Cluster.metrics_enabled" title="cassandra.cluster.Cluster.metrics_enabled"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metrics_enabled</span></code></a> is
<code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>, else <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.ssl_context">
<code class="descname">ssl_context</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.ssl_context" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional <code class="docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code> instance which will be used when new sockets are created.
This should be used when client encryption is enabled in Cassandra.</p>
<p><code class="docutils literal notranslate"><span class="pre">wrap_socket</span></code> options can be set using <a class="reference internal" href="#cassandra.cluster.Cluster.ssl_options" title="cassandra.cluster.Cluster.ssl_options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl_options</span></code></a>. ssl_options will
be used as kwargs for <code class="docutils literal notranslate"><span class="pre">ssl.SSLContext.wrap_socket</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.17.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.ssl_options">
<code class="descname">ssl_options</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.ssl_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Using ssl_options without ssl_context is deprecated and will be removed in the
next major release.</p>
<p>An optional dict which will be used as kwargs for <code class="docutils literal notranslate"><span class="pre">ssl.SSLContext.wrap_socket</span></code> (or
<code class="docutils literal notranslate"><span class="pre">ssl.wrap_socket()</span></code> if used without ssl_context) when new sockets are created.
This should be used when client encryption is enabled in Cassandra.</p>
<p>The following documentation only applies when ssl_options is used without ssl_context.</p>
<p>By default, a <code class="docutils literal notranslate"><span class="pre">ca_certs</span></code> value should be supplied (the value should be
a string pointing to the location of the CA certs file), and you probably
want to specify <code class="docutils literal notranslate"><span class="pre">ssl_version</span></code> as <code class="docutils literal notranslate"><span class="pre">ssl.PROTOCOL_TLSv1</span></code> to match
Cassandra’s default protocol.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.3.0.</span></p>
</div>
<p>In addition to <code class="docutils literal notranslate"><span class="pre">wrap_socket</span></code> kwargs, clients may also specify <code class="docutils literal notranslate"><span class="pre">'check_hostname':</span> <span class="pre">True</span></code> to verify the cert hostname
as outlined in RFC 2818 and RFC 6125. Note that this requires the certificate to be transferred, so
should almost always require the option <code class="docutils literal notranslate"><span class="pre">'cert_reqs':</span> <span class="pre">ssl.CERT_REQUIRED</span></code>. Note also that this functionality was not built into
Python standard library until (2.7.9, 3.2). To enable this mechanism in earlier versions, patch <code class="docutils literal notranslate"><span class="pre">ssl.match_hostname</span></code>
with a custom or <a class="reference external" href="https://pypi.org/project/backports.ssl_match_hostname/">back-ported function</a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.sockopts">
<code class="descname">sockopts</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.sockopts" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional list of tuples which will be used as arguments to
<code class="docutils literal notranslate"><span class="pre">socket.setsockopt()</span></code> for all created sockets.</p>
<p>Note: some drivers find setting TCPNODELAY beneficial in the context of
their execution model. It was not found generally beneficial for this driver.
To try with your own workload, set <code class="docutils literal notranslate"><span class="pre">sockopts</span> <span class="pre">=</span> <span class="pre">[(socket.IPPROTO_TCP,</span> <span class="pre">socket.TCP_NODELAY,</span> <span class="pre">1)]</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.max_schema_agreement_wait">
<code class="descname">max_schema_agreement_wait</code><em class="property"> = 10</em><a class="headerlink" href="#cassandra.cluster.Cluster.max_schema_agreement_wait" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum duration (in seconds) that the driver will wait for schema
agreement across the cluster. Defaults to ten seconds.
If set &lt;= 0, the driver will bypass schema agreement waits altogether.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.metadata">
<code class="descname">metadata</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="../metadata/#cassandra.metadata.Metadata" title="cassandra.metadata.Metadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.metadata.Metadata</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.connection_class">
<code class="descname">connection_class</code><em class="property"> = &lt;class 'cassandra.io.libevreactor.LibevConnection'&gt;</em><a class="headerlink" href="#cassandra.cluster.Cluster.connection_class" title="Permalink to this definition">¶</a></dt>
<dd><p>This determines what event loop system will be used for managing
I/O with Cassandra.  These are the current options:</p>
<ul class="simple">
<li><a class="reference internal" href="../io/asyncorereactor/#cassandra.io.asyncorereactor.AsyncoreConnection" title="cassandra.io.asyncorereactor.AsyncoreConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.io.asyncorereactor.AsyncoreConnection</span></code></a></li>
<li><a class="reference internal" href="../io/libevreactor/#cassandra.io.libevreactor.LibevConnection" title="cassandra.io.libevreactor.LibevConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.io.libevreactor.LibevConnection</span></code></a></li>
<li><a class="reference internal" href="../io/eventletreactor/#cassandra.io.eventletreactor.EventletConnection" title="cassandra.io.eventletreactor.EventletConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.io.eventletreactor.EventletConnection</span></code></a> (requires monkey-patching - see doc for details)</li>
<li><a class="reference internal" href="../io/geventreactor/#cassandra.io.geventreactor.GeventConnection" title="cassandra.io.geventreactor.GeventConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.io.geventreactor.GeventConnection</span></code></a> (requires monkey-patching - see doc for details)</li>
<li><a class="reference internal" href="../io/twistedreactor/#cassandra.io.twistedreactor.TwistedConnection" title="cassandra.io.twistedreactor.TwistedConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.io.twistedreactor.TwistedConnection</span></code></a></li>
<li>EXPERIMENTAL: <a class="reference internal" href="../io/asyncioreactor/#cassandra.io.asyncioreactor.AsyncioConnection" title="cassandra.io.asyncioreactor.AsyncioConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.io.asyncioreactor.AsyncioConnection</span></code></a></li>
</ul>
<p>By default, <code class="docutils literal notranslate"><span class="pre">AsyncoreConnection</span></code> will be used, which uses
the <code class="docutils literal notranslate"><span class="pre">asyncore</span></code> module in the Python standard library.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">libev</span></code> is installed, <code class="docutils literal notranslate"><span class="pre">LibevConnection</span></code> will be used instead.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">gevent</span></code> or <code class="docutils literal notranslate"><span class="pre">eventlet</span></code> monkey-patching is detected, the corresponding
connection class will be used automatically.</p>
<p><code class="docutils literal notranslate"><span class="pre">AsyncioConnection</span></code>, which uses the <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> module in the Python
standard library, is also available, but currently experimental. Note that
it requires <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> features that were only introduced in the 3.4 line
in 3.4.6, and in the 3.5 line in 3.5.1.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.control_connection_timeout">
<code class="descname">control_connection_timeout</code><em class="property"> = 2.0</em><a class="headerlink" href="#cassandra.cluster.Cluster.control_connection_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>A timeout, in seconds, for queries made by the control connection, such
as querying the current schema and information about nodes in the cluster.
If set to <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>, there will be no timeout for these queries.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.idle_heartbeat_interval">
<code class="descname">idle_heartbeat_interval</code><em class="property"> = 30</em><a class="headerlink" href="#cassandra.cluster.Cluster.idle_heartbeat_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Interval, in seconds, on which to heartbeat idle connections. This helps
keep connections open through network devices that expire idle connections.
It also helps discover bad connections early in low-traffic scenarios.
Setting to zero disables heartbeats.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.idle_heartbeat_timeout">
<code class="descname">idle_heartbeat_timeout</code><em class="property"> = 30</em><a class="headerlink" href="#cassandra.cluster.Cluster.idle_heartbeat_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Timeout, in seconds, on which the heartbeat wait for idle connection responses.
Lowering this value can help to discover bad connections earlier.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.schema_event_refresh_window">
<code class="descname">schema_event_refresh_window</code><em class="property"> = 2</em><a class="headerlink" href="#cassandra.cluster.Cluster.schema_event_refresh_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Window, in seconds, within which a schema component will be refreshed after
receiving a schema_change event.</p>
<p>The driver delays a random amount of time in the range [0.0, window)
before executing the refresh. This serves two purposes:</p>
<p>1.) Spread the refresh for deployments with large fanout from C* to client tier,
preventing a ‘thundering herd’ problem with many clients refreshing simultaneously.</p>
<p>2.) Remove redundant refreshes. Redundant events arriving within the delay period
are discarded, and only one refresh is executed.</p>
<p>Setting this to zero will execute refreshes immediately.</p>
<p>Setting this negative will disable schema refreshes in response to push events
(refreshes will still occur in response to schema change responses to DDL statements
executed by Sessions of this Cluster).</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.topology_event_refresh_window">
<code class="descname">topology_event_refresh_window</code><em class="property"> = 10</em><a class="headerlink" href="#cassandra.cluster.Cluster.topology_event_refresh_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Window, in seconds, within which the node and token list will be refreshed after
receiving a topology_change event.</p>
<p>Setting this to zero will execute refreshes immediately.</p>
<p>Setting this negative will disable node refreshes in response to push events.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.Cluster.schema_event_refresh_window" title="cassandra.cluster.Cluster.schema_event_refresh_window"><code class="xref py py-attr docutils literal notranslate"><span class="pre">schema_event_refresh_window</span></code></a> for discussion of rationale</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.status_event_refresh_window">
<code class="descname">status_event_refresh_window</code><em class="property"> = 2</em><a class="headerlink" href="#cassandra.cluster.Cluster.status_event_refresh_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Window, in seconds, within which the driver will start the reconnect after
receiving a status_change event.</p>
<p>Setting this to zero will connect immediately.</p>
<p>This is primarily used to avoid ‘thundering herd’ in deployments with large fanout from cluster to clients.
When nodes come up, clients attempt to reprepare prepared statements (depending on <a class="reference internal" href="#cassandra.cluster.Cluster.reprepare_on_up" title="cassandra.cluster.Cluster.reprepare_on_up"><code class="xref py py-attr docutils literal notranslate"><span class="pre">reprepare_on_up</span></code></a>), and
establish connection pools. This can cause a rush of connections and queries if not mitigated with this factor.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.prepare_on_all_hosts">
<code class="descname">prepare_on_all_hosts</code><em class="property"> = True</em><a class="headerlink" href="#cassandra.cluster.Cluster.prepare_on_all_hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies whether statements should be prepared on all hosts, or just one.</p>
<p>This can reasonably be disabled on long-running applications with numerous clients preparing statements on startup,
where a randomized initial condition of the load balancing policy can be expected to distribute prepares from
different clients across the cluster.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.reprepare_on_up">
<code class="descname">reprepare_on_up</code><em class="property"> = True</em><a class="headerlink" href="#cassandra.cluster.Cluster.reprepare_on_up" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies whether all known prepared statements should be prepared on a node when it comes up.</p>
<p>May be used to avoid overwhelming a node on return, or if it is supposed that the node was only marked down due to
network. If statements are not reprepared, they are prepared on the first execution, causing
an extra roundtrip for one or more client requests.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.connect_timeout">
<code class="descname">connect_timeout</code><em class="property"> = 5</em><a class="headerlink" href="#cassandra.cluster.Cluster.connect_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Timeout, in seconds, for creating new connections.</p>
<p>This timeout covers the entire connection negotiation, including TCP
establishment, options passing, and authentication.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.schema_metadata_enabled">
<code class="descname">schema_metadata_enabled</code><em class="property"> = True</em><a class="headerlink" href="#cassandra.cluster.Cluster.schema_metadata_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating whether internal schema metadata is updated.</p>
<p>When disabled, the driver does not populate Cluster.metadata.keyspaces on connect, or on schema change events. This
can be used to speed initial connection, and reduce load on client and server during operation. Turning this off
gives away token aware request routing, and programmatic inspection of the metadata model.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.token_metadata_enabled">
<code class="descname">token_metadata_enabled</code><em class="property"> = True</em><a class="headerlink" href="#cassandra.cluster.Cluster.token_metadata_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating whether internal token metadata is updated.</p>
<p>When disabled, the driver does not query node token information on connect, or on topology change events. This
can be used to speed initial connection, and reduce load on client and server during operation. It is most useful
in large clusters using vnodes, where the token map can be expensive to compute. Turning this off
gives away token aware request routing, and programmatic inspection of the token ring.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.timestamp_generator">
<code class="descname">timestamp_generator</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.timestamp_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>An object, shared between all sessions created by this cluster instance,
that generates timestamps when client-side timestamp generation is enabled.
By default, each <a class="reference internal" href="#cassandra.cluster.Cluster" title="cassandra.cluster.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span></code></a> uses a new
<a class="reference internal" href="../timestamps/#cassandra.timestamps.MonotonicTimestampGenerator" title="cassandra.timestamps.MonotonicTimestampGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonotonicTimestampGenerator</span></code></a>.</p>
<p>Applications can set this value for custom timestamp behavior. See the
documentation for <a class="reference internal" href="#cassandra.cluster.Session.timestamp_generator" title="cassandra.cluster.Session.timestamp_generator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.timestamp_generator()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.endpoint_factory">
<code class="descname">endpoint_factory</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.endpoint_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="../connection/#cassandra.connection.EndPointFactory" title="cassandra.connection.EndPointFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">EndPointFactory</span></code></a> instance to use internally when creating
a socket connection to a node. You can ignore this unless you need a special
connection mechanism.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Cluster.cloud">
<code class="descname">cloud</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Cluster.cloud" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of the cloud configuration. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="c1"># path to the secure connect bundle</span>
    <span class="s1">&#39;secure_connect_bundle&#39;</span><span class="p">:</span> <span class="s1">&#39;/path/to/secure-connect-dbname.zip&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The zip file will be temporarily extracted in the same directory to
load the configuration and certificates.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>keyspace=None</em>, <em>wait_for_all_pools=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a new <a class="reference internal" href="#cassandra.cluster.Session" title="cassandra.cluster.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> object.</p>
<p>If <cite>keyspace</cite> is specified, that keyspace will be the default keyspace for
operations on the <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p><cite>wait_for_all_pools</cite> specifies whether this call should wait for all connection pools to be
established or attempted. Default is <cite>False</cite>, which means it will return when the first
successful connection is established. Remaining pools are added asynchronously.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes all sessions and connection associated with this Cluster.
To ensure all connections are properly closed, <strong>you should always
call shutdown() on a Cluster instance when you are done with it</strong>.</p>
<p>Once shutdown, a Cluster should not be used for any purpose.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.register_user_type">
<code class="descname">register_user_type</code><span class="sig-paren">(</span><em>keyspace</em>, <em>user_type</em>, <em>klass</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.register_user_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.register_user_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a class to use to represent a particular user-defined type.
Query parameters for this user-defined type will be assumed to be
instances of <cite>klass</cite>.  Result sets for this user-defined type will
be instances of <cite>klass</cite>.  If no class is registered for a user-defined
type, a namedtuple will be used for result sets, and non-prepared
statements may not encode parameters for this type correctly.</p>
<p><cite>keyspace</cite> is the name of the keyspace that the UDT is defined in.</p>
<p><cite>user_type</cite> is the string name of the UDT to register the mapping
for.</p>
<p><cite>klass</cite> should be a class with attributes whose names match the
fields of the user-defined type.  The constructor must accepts kwargs
for each of the fields in the UDT.</p>
<p>This method should only be called after the type has been created
within Cassandra.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="n">protocol_version</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">set_keyspace</span><span class="p">(</span><span class="s1">&#39;mykeyspace&#39;</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TYPE address (street text, zipcode int)&quot;</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE users (id int PRIMARY KEY, location address)&quot;</span><span class="p">)</span>

<span class="c1"># create a class to map to the &quot;address&quot; UDT</span>
<span class="k">class</span> <span class="nc">Address</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">street</span><span class="p">,</span> <span class="n">zipcode</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">street</span> <span class="o">=</span> <span class="n">street</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zipcode</span> <span class="o">=</span> <span class="n">zipcode</span>

<span class="n">cluster</span><span class="o">.</span><span class="n">register_user_type</span><span class="p">(</span><span class="s1">&#39;mykeyspace&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="n">Address</span><span class="p">)</span>

<span class="c1"># insert a row using an instance of Address</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO users (id, location) VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Address</span><span class="p">(</span><span class="s2">&quot;123 Main St.&quot;</span><span class="p">,</span> <span class="mi">78723</span><span class="p">)))</span>

<span class="c1"># results will include Address instances</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM users&quot;</span><span class="p">)</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span> <span class="n">row</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">street</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">zipcode</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.register_listener">
<code class="descname">register_listener</code><span class="sig-paren">(</span><em>listener</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.register_listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.register_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a <code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.policies.HostStateListener</span></code> subclass instance to
the list of listeners to be notified when a host is added, removed,
marked up, or marked down.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.unregister_listener">
<code class="descname">unregister_listener</code><span class="sig-paren">(</span><em>listener</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.unregister_listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.unregister_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a registered listener.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.add_execution_profile">
<code class="descname">add_execution_profile</code><span class="sig-paren">(</span><em>name</em>, <em>profile</em>, <em>pool_wait_timeout=5</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.add_execution_profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.add_execution_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an <a class="reference internal" href="#cassandra.cluster.ExecutionProfile" title="cassandra.cluster.ExecutionProfile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionProfile</span></code></a> to the cluster. This makes it available for use by <code class="docutils literal notranslate"><span class="pre">name</span></code> in <a class="reference internal" href="#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>
and <a class="reference internal" href="#cassandra.cluster.Session.execute_async" title="cassandra.cluster.Session.execute_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute_async()</span></code></a>. This method will raise if the profile already exists.</p>
<p>Normally profiles will be injected at cluster initialization via <code class="docutils literal notranslate"><span class="pre">Cluster(execution_profiles)</span></code>. This method
provides a way of adding them dynamically.</p>
<p>Adding a new profile updates the connection pools according to the specified <code class="docutils literal notranslate"><span class="pre">load_balancing_policy</span></code>. By default,
this method will wait up to five seconds for the pool creation to complete, so the profile can be used immediately
upon return. This behavior can be controlled using <code class="docutils literal notranslate"><span class="pre">pool_wait_timeout</span></code> (see
<a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.wait">concurrent.futures.wait</a>
for timeout semantics).</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.set_max_requests_per_connection">
<code class="descname">set_max_requests_per_connection</code><span class="sig-paren">(</span><em>host_distance</em>, <em>max_requests</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.set_max_requests_per_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.set_max_requests_per_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a threshold for concurrent requests per connection, above which new
connections will be created to a host (up to max connections;
see <a class="reference internal" href="#cassandra.cluster.Cluster.set_max_connections_per_host" title="cassandra.cluster.Cluster.set_max_connections_per_host"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_max_connections_per_host()</span></code></a>).</p>
<p>Pertains to connection pool management in protocol versions {1,2}.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.get_max_requests_per_connection">
<code class="descname">get_max_requests_per_connection</code><span class="sig-paren">(</span><em>host_distance</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.get_max_requests_per_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.get_max_requests_per_connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.set_min_requests_per_connection">
<code class="descname">set_min_requests_per_connection</code><span class="sig-paren">(</span><em>host_distance</em>, <em>min_requests</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.set_min_requests_per_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.set_min_requests_per_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a threshold for concurrent requests per connection, below which
connections will be considered for disposal (down to core connections;
see <a class="reference internal" href="#cassandra.cluster.Cluster.set_core_connections_per_host" title="cassandra.cluster.Cluster.set_core_connections_per_host"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_core_connections_per_host()</span></code></a>).</p>
<p>Pertains to connection pool management in protocol versions {1,2}.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.get_min_requests_per_connection">
<code class="descname">get_min_requests_per_connection</code><span class="sig-paren">(</span><em>host_distance</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.get_min_requests_per_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.get_min_requests_per_connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.get_core_connections_per_host">
<code class="descname">get_core_connections_per_host</code><span class="sig-paren">(</span><em>host_distance</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.get_core_connections_per_host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.get_core_connections_per_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the minimum number of connections per Session that will be opened
for each host with <a class="reference internal" href="../policies/#cassandra.policies.HostDistance" title="cassandra.policies.HostDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">HostDistance</span></code></a> equal to <cite>host_distance</cite>.
The default is 2 for <code class="xref py py-attr docutils literal notranslate"><span class="pre">LOCAL</span></code> and 1 for
<code class="xref py py-attr docutils literal notranslate"><span class="pre">REMOTE</span></code>.</p>
<p>This property is ignored if <a class="reference internal" href="#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> is
3 or higher.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.set_core_connections_per_host">
<code class="descname">set_core_connections_per_host</code><span class="sig-paren">(</span><em>host_distance</em>, <em>core_connections</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.set_core_connections_per_host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.set_core_connections_per_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the minimum number of connections per Session that will be opened
for each host with <a class="reference internal" href="../policies/#cassandra.policies.HostDistance" title="cassandra.policies.HostDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">HostDistance</span></code></a> equal to <cite>host_distance</cite>.
The default is 2 for <code class="xref py py-attr docutils literal notranslate"><span class="pre">LOCAL</span></code> and 1 for
<code class="xref py py-attr docutils literal notranslate"><span class="pre">REMOTE</span></code>.</p>
<p>Protocol version 1 and 2 are limited in the number of concurrent
requests they can send per connection. The driver implements connection
pooling to support higher levels of concurrency.</p>
<p>If <a class="reference internal" href="#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> is set to 3 or higher, this
is not supported (there is always one connection per host, unless
the host is remote and <code class="xref py py-attr docutils literal notranslate"><span class="pre">connect_to_remote_hosts</span></code> is <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>)
and using this will result in an <code class="xref py py-exc docutils literal notranslate"><span class="pre">UnsupporteOperation</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.get_max_connections_per_host">
<code class="descname">get_max_connections_per_host</code><span class="sig-paren">(</span><em>host_distance</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.get_max_connections_per_host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.get_max_connections_per_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the maximum number of connections per Session that will be opened
for each host with <a class="reference internal" href="../policies/#cassandra.policies.HostDistance" title="cassandra.policies.HostDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">HostDistance</span></code></a> equal to <cite>host_distance</cite>.
The default is 8 for <code class="xref py py-attr docutils literal notranslate"><span class="pre">LOCAL</span></code> and 2 for
<code class="xref py py-attr docutils literal notranslate"><span class="pre">REMOTE</span></code>.</p>
<p>This property is ignored if <a class="reference internal" href="#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> is
3 or higher.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.set_max_connections_per_host">
<code class="descname">set_max_connections_per_host</code><span class="sig-paren">(</span><em>host_distance</em>, <em>max_connections</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.set_max_connections_per_host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.set_max_connections_per_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the maximum number of connections per Session that will be opened
for each host with <a class="reference internal" href="../policies/#cassandra.policies.HostDistance" title="cassandra.policies.HostDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">HostDistance</span></code></a> equal to <cite>host_distance</cite>.
The default is 2 for <code class="xref py py-attr docutils literal notranslate"><span class="pre">LOCAL</span></code> and 1 for
<code class="xref py py-attr docutils literal notranslate"><span class="pre">REMOTE</span></code>.</p>
<p>If <a class="reference internal" href="#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> is set to 3 or higher, this
is not supported (there is always one connection per host, unless
the host is remote and <code class="xref py py-attr docutils literal notranslate"><span class="pre">connect_to_remote_hosts</span></code> is <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>)
and using this will result in an <code class="xref py py-exc docutils literal notranslate"><span class="pre">UnsupporteOperation</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.get_control_connection_host">
<code class="descname">get_control_connection_host</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.get_control_connection_host"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.get_control_connection_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the control connection host metadata.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.refresh_schema_metadata">
<code class="descname">refresh_schema_metadata</code><span class="sig-paren">(</span><em>max_schema_agreement_wait=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.refresh_schema_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.refresh_schema_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronously refresh all schema metadata.</p>
<p>By default, the timeout for this operation is governed by <a class="reference internal" href="#cassandra.cluster.Cluster.max_schema_agreement_wait" title="cassandra.cluster.Cluster.max_schema_agreement_wait"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_schema_agreement_wait</span></code></a>
and <a class="reference internal" href="#cassandra.cluster.Cluster.control_connection_timeout" title="cassandra.cluster.Cluster.control_connection_timeout"><code class="xref py py-attr docutils literal notranslate"><span class="pre">control_connection_timeout</span></code></a>.</p>
<p>Passing max_schema_agreement_wait here overrides <a class="reference internal" href="#cassandra.cluster.Cluster.max_schema_agreement_wait" title="cassandra.cluster.Cluster.max_schema_agreement_wait"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_schema_agreement_wait</span></code></a>.</p>
<p>Setting max_schema_agreement_wait &lt;= 0 will bypass schema agreement and refresh schema immediately.</p>
<p>An Exception is raised if schema refresh fails for any reason.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.refresh_keyspace_metadata">
<code class="descname">refresh_keyspace_metadata</code><span class="sig-paren">(</span><em>keyspace</em>, <em>max_schema_agreement_wait=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.refresh_keyspace_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.refresh_keyspace_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronously refresh keyspace metadata. This applies to keyspace-level information such as replication
and durability settings. It does not refresh tables, types, etc. contained in the keyspace.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.Cluster.refresh_schema_metadata" title="cassandra.cluster.Cluster.refresh_schema_metadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_schema_metadata()</span></code></a> for description of <code class="docutils literal notranslate"><span class="pre">max_schema_agreement_wait</span></code> behavior</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.refresh_table_metadata">
<code class="descname">refresh_table_metadata</code><span class="sig-paren">(</span><em>keyspace</em>, <em>table</em>, <em>max_schema_agreement_wait=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.refresh_table_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.refresh_table_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronously refresh table metadata. This applies to a table, and any triggers or indexes attached
to the table.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.Cluster.refresh_schema_metadata" title="cassandra.cluster.Cluster.refresh_schema_metadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_schema_metadata()</span></code></a> for description of <code class="docutils literal notranslate"><span class="pre">max_schema_agreement_wait</span></code> behavior</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.refresh_user_type_metadata">
<code class="descname">refresh_user_type_metadata</code><span class="sig-paren">(</span><em>keyspace</em>, <em>user_type</em>, <em>max_schema_agreement_wait=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.refresh_user_type_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.refresh_user_type_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronously refresh user defined type metadata.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.Cluster.refresh_schema_metadata" title="cassandra.cluster.Cluster.refresh_schema_metadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_schema_metadata()</span></code></a> for description of <code class="docutils literal notranslate"><span class="pre">max_schema_agreement_wait</span></code> behavior</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.refresh_user_function_metadata">
<code class="descname">refresh_user_function_metadata</code><span class="sig-paren">(</span><em>keyspace</em>, <em>function</em>, <em>max_schema_agreement_wait=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.refresh_user_function_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.refresh_user_function_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronously refresh user defined function metadata.</p>
<p><code class="docutils literal notranslate"><span class="pre">function</span></code> is a <a class="reference internal" href="../#cassandra.UserFunctionDescriptor" title="cassandra.UserFunctionDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.UserFunctionDescriptor</span></code></a>.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.Cluster.refresh_schema_metadata" title="cassandra.cluster.Cluster.refresh_schema_metadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_schema_metadata()</span></code></a> for description of <code class="docutils literal notranslate"><span class="pre">max_schema_agreement_wait</span></code> behavior</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.refresh_user_aggregate_metadata">
<code class="descname">refresh_user_aggregate_metadata</code><span class="sig-paren">(</span><em>keyspace</em>, <em>aggregate</em>, <em>max_schema_agreement_wait=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.refresh_user_aggregate_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.refresh_user_aggregate_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronously refresh user defined aggregate metadata.</p>
<p><code class="docutils literal notranslate"><span class="pre">aggregate</span></code> is a <a class="reference internal" href="../#cassandra.UserAggregateDescriptor" title="cassandra.UserAggregateDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.UserAggregateDescriptor</span></code></a>.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.Cluster.refresh_schema_metadata" title="cassandra.cluster.Cluster.refresh_schema_metadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_schema_metadata()</span></code></a> for description of <code class="docutils literal notranslate"><span class="pre">max_schema_agreement_wait</span></code> behavior</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.refresh_nodes">
<code class="descname">refresh_nodes</code><span class="sig-paren">(</span><em>force_token_rebuild=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.refresh_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.refresh_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronously refresh the node list and token metadata</p>
<p><cite>force_token_rebuild</cite> can be used to rebuild the token map metadata, even if no new nodes are discovered.</p>
<p>An Exception is raised if node refresh fails for any reason.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Cluster.set_meta_refresh_enabled">
<code class="descname">set_meta_refresh_enabled</code><span class="sig-paren">(</span><em>enabled</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Cluster.set_meta_refresh_enabled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Cluster.set_meta_refresh_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Deprecated:</em> set <a class="reference internal" href="#cassandra.cluster.Cluster.schema_metadata_enabled" title="cassandra.cluster.Cluster.schema_metadata_enabled"><code class="xref py py-attr docutils literal notranslate"><span class="pre">schema_metadata_enabled</span></code></a> <a class="reference internal" href="#cassandra.cluster.Cluster.token_metadata_enabled" title="cassandra.cluster.Cluster.token_metadata_enabled"><code class="xref py py-attr docutils literal notranslate"><span class="pre">token_metadata_enabled</span></code></a> instead</p>
<p>Sets a flag to enable (True) or disable (False) all metadata refresh queries.
This applies to both schema and node topology.</p>
<p>Disabling this is useful to minimize refreshes during multiple changes.</p>
<p>Meta refresh must be enabled for the driver to become aware of any cluster
topology changes or schema updates.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.cluster.ExecutionProfile">
<em class="property">class </em><code class="descclassname">cassandra.cluster.</code><code class="descname">ExecutionProfile</code><span class="sig-paren">(</span><em>load_balancing_policy=&lt;object object&gt;</em>, <em>retry_policy=None</em>, <em>consistency_level=ConsistencyLevel.LOCAL_ONE</em>, <em>serial_consistency_level=None</em>, <em>request_timeout=10.0</em>, <em>row_factory=&lt;function named_tuple_factory&gt;</em>, <em>speculative_execution_policy=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ExecutionProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ExecutionProfile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="cassandra.cluster.ExecutionProfile.consistency_level">
<code class="descname">consistency_level</code><em class="property"> = LOCAL_ONE</em><a class="headerlink" href="#cassandra.cluster.ExecutionProfile.consistency_level" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="../#cassandra.ConsistencyLevel" title="cassandra.ConsistencyLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConsistencyLevel</span></code></a> used when not specified on a <a class="reference internal" href="../query/#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ExecutionProfile.load_balancing_policy">
<code class="descname">load_balancing_policy</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.ExecutionProfile.load_balancing_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="../policies/#cassandra.policies.LoadBalancingPolicy" title="cassandra.policies.LoadBalancingPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.LoadBalancingPolicy</span></code></a> or one of its subclasses.</p>
<p>Used in determining host distance for establishing connections, and routing requests.</p>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">TokenAwarePolicy(DCAwareRoundRobinPolicy())</span></code> if not specified</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ExecutionProfile.retry_policy">
<code class="descname">retry_policy</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.ExecutionProfile.retry_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="../policies/#cassandra.policies.RetryPolicy" title="cassandra.policies.RetryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.RetryPolicy</span></code></a> instance used when <a class="reference internal" href="../query/#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a> objects do not have a
<a class="reference internal" href="../query/#cassandra.query.Statement.retry_policy" title="cassandra.query.Statement.retry_policy"><code class="xref py py-attr docutils literal notranslate"><span class="pre">retry_policy</span></code></a> explicitly set.</p>
<p>Defaults to <a class="reference internal" href="../policies/#cassandra.policies.RetryPolicy" title="cassandra.policies.RetryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RetryPolicy</span></code></a> if not specified</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ExecutionProfile.serial_consistency_level">
<code class="descname">serial_consistency_level</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.ExecutionProfile.serial_consistency_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Serial <a class="reference internal" href="../#cassandra.ConsistencyLevel" title="cassandra.ConsistencyLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConsistencyLevel</span></code></a> used when not specified on a <a class="reference internal" href="../query/#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a> (for LWT conditional statements).</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ExecutionProfile.request_timeout">
<code class="descname">request_timeout</code><em class="property"> = 10.0</em><a class="headerlink" href="#cassandra.cluster.ExecutionProfile.request_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Request timeout used when not overridden in <a class="reference internal" href="#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a></p>
</dd></dl>

<dl class="staticmethod">
<dt id="cassandra.cluster.ExecutionProfile.row_factory">
<em class="property">static </em><code class="descname">row_factory</code><span class="sig-paren">(</span><em>colnames</em>, <em>rows</em><span class="sig-paren">)</span><a class="headerlink" href="#cassandra.cluster.ExecutionProfile.row_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>A callable to format results, accepting <code class="docutils literal notranslate"><span class="pre">(colnames,</span> <span class="pre">rows)</span></code> where <code class="docutils literal notranslate"><span class="pre">colnames</span></code> is a list of column names, and
<code class="docutils literal notranslate"><span class="pre">rows</span></code> is a list of tuples, with each tuple representing a row of parsed values.</p>
<p>Some example implementations:</p>
<ul class="simple">
<li><a class="reference internal" href="../query/#cassandra.query.tuple_factory" title="cassandra.query.tuple_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">cassandra.query.tuple_factory()</span></code></a> - return a result row as a tuple</li>
<li><a class="reference internal" href="../query/#cassandra.query.named_tuple_factory" title="cassandra.query.named_tuple_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">cassandra.query.named_tuple_factory()</span></code></a> - return a result row as a named tuple</li>
<li><a class="reference internal" href="../query/#cassandra.query.dict_factory" title="cassandra.query.dict_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">cassandra.query.dict_factory()</span></code></a> - return a result row as a dict</li>
<li><a class="reference internal" href="../query/#cassandra.query.ordered_dict_factory" title="cassandra.query.ordered_dict_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">cassandra.query.ordered_dict_factory()</span></code></a> - return a result row as an OrderedDict</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ExecutionProfile.speculative_execution_policy">
<code class="descname">speculative_execution_policy</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.ExecutionProfile.speculative_execution_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="../policies/#cassandra.policies.SpeculativeExecutionPolicy" title="cassandra.policies.SpeculativeExecutionPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.SpeculativeExecutionPolicy</span></code></a></p>
<p>Defaults to <code class="xref py py-class docutils literal notranslate"><span class="pre">NoSpeculativeExecutionPolicy</span></code> if not specified</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ExecutionProfile.continuous_paging_options">
<code class="descname">continuous_paging_options</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.ExecutionProfile.continuous_paging_options" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Note:</em> This feature is implemented to facilitate server integration testing. It is not intended for general use in the Python driver.
See <a class="reference internal" href="../query/#cassandra.query.Statement.fetch_size" title="cassandra.query.Statement.fetch_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Statement.fetch_size</span></code></a> or <a class="reference internal" href="#cassandra.cluster.Session.default_fetch_size" title="cassandra.cluster.Session.default_fetch_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.default_fetch_size</span></code></a> for configuring normal paging.</p>
<p>When set, requests will use DSE’s continuous paging, which streams multiple pages without
intermediate requests.</p>
<p>This has the potential to materialize all results in memory at once if the consumer cannot keep up. Use options
to constrain page size and rate.</p>
<p>This is only available for DSE clusters.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.cluster.GraphExecutionProfile">
<em class="property">class </em><code class="descclassname">cassandra.cluster.</code><code class="descname">GraphExecutionProfile</code><span class="sig-paren">(</span><em>load_balancing_policy=_NOT_SET</em>, <em>retry_policy=None</em>, <em>consistency_level=ConsistencyLevel.LOCAL_ONE</em>, <em>serial_consistency_level=None</em>, <em>request_timeout=30.0</em>, <em>row_factory=None</em>, <em>graph_options=None</em>, <em>continuous_paging_options=_NOT_SET</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#GraphExecutionProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.GraphExecutionProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Default execution profile for graph execution.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.ExecutionProfile" title="cassandra.cluster.ExecutionProfile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecutionProfile</span></code></a> for base attributes. Note that if not explicitly set,
the row_factory and graph_options.graph_protocol are resolved during the query execution.
These options will resolve to graph_graphson3_row_factory and GraphProtocol.GRAPHSON_3_0
for the core graph engine (DSE 6.8+), otherwise graph_object_row_factory and GraphProtocol.GRAPHSON_1_0</p>
<p>In addition to default parameters shown in the signature, this profile also defaults <code class="docutils literal notranslate"><span class="pre">retry_policy</span></code> to
<code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.policies.NeverRetryPolicy</span></code>.</p>
<dl class="attribute">
<dt id="cassandra.cluster.GraphExecutionProfile.graph_options">
<code class="descname">graph_options</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.GraphExecutionProfile.graph_options" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="../datastax/graph/#cassandra.datastax.graph.GraphOptions" title="cassandra.datastax.graph.GraphOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GraphOptions</span></code></a> to use with this execution</p>
<p>Default options for graph queries, initialized as follows by default:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GraphOptions</span><span class="p">(</span><span class="n">graph_language</span><span class="o">=</span><span class="sa">b</span><span class="s1">&#39;gremlin-groovy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>See cassandra.graph.GraphOptions</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.cluster.GraphAnalyticsExecutionProfile">
<em class="property">class </em><code class="descclassname">cassandra.cluster.</code><code class="descname">GraphAnalyticsExecutionProfile</code><span class="sig-paren">(</span><em>load_balancing_policy=None</em>, <em>retry_policy=None</em>, <em>consistency_level=ConsistencyLevel.LOCAL_ONE</em>, <em>serial_consistency_level=None</em>, <em>request_timeout=3600. * 24. * 7.</em>, <em>row_factory=None</em>, <em>graph_options=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#GraphAnalyticsExecutionProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.GraphAnalyticsExecutionProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Execution profile with timeout and load balancing appropriate for graph analytics queries.</p>
<p>See also <code class="xref py py-class docutils literal notranslate"><span class="pre">GraphExecutionPolicy</span></code>.</p>
<p>In addition to default parameters shown in the signature, this profile also defaults <code class="docutils literal notranslate"><span class="pre">retry_policy</span></code> to
<code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.policies.NeverRetryPolicy</span></code>, and <code class="docutils literal notranslate"><span class="pre">load_balancing_policy</span></code> to one that targets the current Spark
master.</p>
<p>Note: The graph_options.graph_source is set automatically to b’a’ (analytics)
when using GraphAnalyticsExecutionProfile. This is mandatory to target analytics nodes.</p>
</dd></dl>

<dl class="data">
<dt id="cassandra.cluster.EXEC_PROFILE_DEFAULT">
<code class="descclassname">cassandra.cluster.</code><code class="descname">EXEC_PROFILE_DEFAULT</code><a class="headerlink" href="#cassandra.cluster.EXEC_PROFILE_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd><p>Key for the <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> default execution profile, used when no other profile is selected in
<code class="docutils literal notranslate"><span class="pre">Session.execute(execution_profile)</span></code>.</p>
<p>Use this as the key in <code class="docutils literal notranslate"><span class="pre">Cluster(execution_profiles)</span></code> to override the default profile.</p>
</dd></dl>

<dl class="data">
<dt id="cassandra.cluster.EXEC_PROFILE_GRAPH_DEFAULT">
<code class="descclassname">cassandra.cluster.</code><code class="descname">EXEC_PROFILE_GRAPH_DEFAULT</code><a class="headerlink" href="#cassandra.cluster.EXEC_PROFILE_GRAPH_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd><p>Key for the default graph execution profile, used when no other profile is selected in
<code class="docutils literal notranslate"><span class="pre">Session.execute_graph(execution_profile)</span></code>.</p>
<p>Use this as the key in <a class="reference internal" href="../../../execution_profiles/"><span class="doc">Cluster(execution_profiles)</span></a>
to override the default graph profile.</p>
</dd></dl>

<dl class="data">
<dt id="cassandra.cluster.EXEC_PROFILE_GRAPH_SYSTEM_DEFAULT">
<code class="descclassname">cassandra.cluster.</code><code class="descname">EXEC_PROFILE_GRAPH_SYSTEM_DEFAULT</code><a class="headerlink" href="#cassandra.cluster.EXEC_PROFILE_GRAPH_SYSTEM_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd><p>Key for the default graph system execution profile. This can be used for graph statements using the DSE graph
system API.</p>
<p>Selected using <code class="docutils literal notranslate"><span class="pre">Session.execute_graph(execution_profile=EXEC_PROFILE_GRAPH_SYSTEM_DEFAULT)</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="cassandra.cluster.EXEC_PROFILE_GRAPH_ANALYTICS_DEFAULT">
<code class="descclassname">cassandra.cluster.</code><code class="descname">EXEC_PROFILE_GRAPH_ANALYTICS_DEFAULT</code><a class="headerlink" href="#cassandra.cluster.EXEC_PROFILE_GRAPH_ANALYTICS_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd><p>Key for the default graph analytics execution profile. This can be used for graph statements intended to
use Spark/analytics as the traversal source.</p>
<p>Selected using <code class="docutils literal notranslate"><span class="pre">Session.execute_graph(execution_profile=EXEC_PROFILE_GRAPH_ANALYTICS_DEFAULT)</span></code>.</p>
</dd></dl>

<dl class="class">
<dt id="cassandra.cluster.Session">
<em class="property">class </em><code class="descclassname">cassandra.cluster.</code><code class="descname">Session</code><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>A collection of connection pools for each host in the cluster.
Instances of this class should not be created directly, only
using <a class="reference internal" href="#cassandra.cluster.Cluster.connect" title="cassandra.cluster.Cluster.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Cluster.connect()</span></code></a>.</p>
<p>Queries and statements can be executed through <code class="docutils literal notranslate"><span class="pre">Session</span></code> instances
using the <a class="reference internal" href="#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a> and <a class="reference internal" href="#cassandra.cluster.Session.execute_async" title="cassandra.cluster.Session.execute_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute_async()</span></code></a>
methods.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">set_keyspace</span><span class="p">(</span><span class="s2">&quot;mykeyspace&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM mycf&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="cassandra.cluster.Session.default_timeout">
<code class="descname">default_timeout</code><em class="property"> = 10.0</em><a class="headerlink" href="#cassandra.cluster.Session.default_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>A default timeout, measured in seconds, for queries executed through
<a class="reference internal" href="#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a> or <a class="reference internal" href="#cassandra.cluster.Session.execute_async" title="cassandra.cluster.Session.execute_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute_async()</span></code></a>.  This default may be
overridden with the <cite>timeout</cite> parameter for either of those methods.</p>
<p>Setting this to <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> will cause no timeouts to be set by default.</p>
<p>Please see <a class="reference internal" href="#cassandra.cluster.ResponseFuture.result" title="cassandra.cluster.ResponseFuture.result"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResponseFuture.result()</span></code></a> for details on the scope and
effect of this timeout.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Session.default_consistency_level">
<code class="descname">default_consistency_level</code><em class="property"> = LOCAL_ONE</em><a class="headerlink" href="#cassandra.cluster.Session.default_consistency_level" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Deprecated:</em> use execution profiles instead
The default <code class="xref py py-class docutils literal notranslate"><span class="pre">ConsistencyLevel</span></code> for operations executed through
this session.  This default may be overridden by setting the
<a class="reference internal" href="../query/#cassandra.query.Statement.consistency_level" title="cassandra.query.Statement.consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">consistency_level</span></code></a> on individual statements.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.2.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.0.0: </span>default changed from ONE to LOCAL_ONE</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Session.default_serial_consistency_level">
<code class="descname">default_serial_consistency_level</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Session.default_serial_consistency_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The default <code class="xref py py-class docutils literal notranslate"><span class="pre">ConsistencyLevel</span></code> for serial phase of  conditional updates executed through
this session.  This default may be overridden by setting the
<a class="reference internal" href="../query/#cassandra.query.Statement.serial_consistency_level" title="cassandra.query.Statement.serial_consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">serial_consistency_level</span></code></a> on individual statements.</p>
<p>Only valid for <code class="docutils literal notranslate"><span class="pre">protocol_version</span> <span class="pre">&gt;=</span> <span class="pre">2</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Session.row_factory">
<code class="descname">row_factory</code><em class="property"> = &lt;function named_tuple_factory&gt;</em><a class="headerlink" href="#cassandra.cluster.Session.row_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The format to return row results in.  By default, each
returned row will be a named tuple.  You can alternatively
use any of the following:</p>
<ul class="simple">
<li><a class="reference internal" href="../query/#cassandra.query.tuple_factory" title="cassandra.query.tuple_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">cassandra.query.tuple_factory()</span></code></a> - return a result row as a tuple</li>
<li><a class="reference internal" href="../query/#cassandra.query.named_tuple_factory" title="cassandra.query.named_tuple_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">cassandra.query.named_tuple_factory()</span></code></a> - return a result row as a named tuple</li>
<li><a class="reference internal" href="../query/#cassandra.query.dict_factory" title="cassandra.query.dict_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">cassandra.query.dict_factory()</span></code></a> - return a result row as a dict</li>
<li><a class="reference internal" href="../query/#cassandra.query.ordered_dict_factory" title="cassandra.query.ordered_dict_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">cassandra.query.ordered_dict_factory()</span></code></a> - return a result row as an OrderedDict</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Session.default_fetch_size">
<code class="descname">default_fetch_size</code><em class="property"> = 5000</em><a class="headerlink" href="#cassandra.cluster.Session.default_fetch_size" title="Permalink to this definition">¶</a></dt>
<dd><p>By default, this many rows will be fetched at a time. Setting
this to <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> will disable automatic paging for large query
results.  The fetch size can be also specified per-query through
<a class="reference internal" href="../query/#cassandra.query.Statement.fetch_size" title="cassandra.query.Statement.fetch_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Statement.fetch_size</span></code></a>.</p>
<p>This only takes effect when protocol version 2 or higher is used.
See <a class="reference internal" href="#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Cluster.protocol_version</span></code></a> for details.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Session.use_client_timestamp">
<code class="descname">use_client_timestamp</code><em class="property"> = True</em><a class="headerlink" href="#cassandra.cluster.Session.use_client_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>When using protocol version 3 or higher, write timestamps may be supplied
client-side at the protocol level.  (Normally they are generated
server-side by the coordinator node.)  Note that timestamps specified
within a CQL query will override this timestamp.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Session.timestamp_generator">
<code class="descname">timestamp_generator</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Session.timestamp_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>When <a class="reference internal" href="#cassandra.cluster.Session.use_client_timestamp" title="cassandra.cluster.Session.use_client_timestamp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">use_client_timestamp</span></code></a> is set, sessions call this object and use
the result as the timestamp.  (Note that timestamps specified within a CQL
query will override this timestamp.)  By default, a new
<a class="reference internal" href="../timestamps/#cassandra.timestamps.MonotonicTimestampGenerator" title="cassandra.timestamps.MonotonicTimestampGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonotonicTimestampGenerator</span></code></a> is created for
each <a class="reference internal" href="#cassandra.cluster.Cluster" title="cassandra.cluster.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span></code></a> instance.</p>
<p>Applications can set this value for custom timestamp behavior.  For
example, an application could share a timestamp generator across
<a class="reference internal" href="#cassandra.cluster.Cluster" title="cassandra.cluster.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span></code></a> objects to guarantee that the application will use unique,
increasing timestamps across clusters, or set it to to <code class="docutils literal notranslate"><span class="pre">lambda:</span>
<span class="pre">int(time.time()</span> <span class="pre">*</span> <span class="pre">1e6)</span></code> if losing records over clock inconsistencies is
acceptable for the application. Custom <a class="reference internal" href="#cassandra.cluster.Session.timestamp_generator" title="cassandra.cluster.Session.timestamp_generator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timestamp_generator</span></code></a> s should
be callable, and calling them should return an integer representing microseconds
since some point in time, typically UNIX epoch.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.8.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Session.encoder">
<code class="descname">encoder</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.Session.encoder" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="../encoder/#cassandra.encoder.Encoder" title="cassandra.encoder.Encoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Encoder</span></code></a> instance that will be used when
formatting query parameters for non-prepared statements.  This is not used
for prepared statements (because prepared statements give the driver more
information about what CQL types are expected, allowing it to accept a
wider range of python types).</p>
<p>The encoder uses a mapping from python types to encoder methods (for
specific CQL types).  This mapping can be be modified by users as they see
fit.  Methods of <a class="reference internal" href="../encoder/#cassandra.encoder.Encoder" title="cassandra.encoder.Encoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Encoder</span></code></a> should be used for mapping
values if possible, because they take precautions to avoid injections and
properly sanitize data.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">()</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;mykeyspace&quot;</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">encoder</span><span class="o">.</span><span class="n">mapping</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">encoder</span><span class="o">.</span><span class="n">cql_encode_tuple</span>

<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE mytable (k int PRIMARY KEY, col tuple&lt;int, ascii&gt;)&quot;</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO mytable (k, col) VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;abc&#39;</span><span class="p">)])</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.Session.client_protocol_handler">
<code class="descname">client_protocol_handler</code><em class="property"> = &lt;class 'cassandra.protocol._ProtocolHandler'&gt;</em><a class="headerlink" href="#cassandra.cluster.Session.client_protocol_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies a protocol handler that will be used for client-initiated requests (i.e. no
internal driver requests). This can be used to override or extend features such as
message or type ser/des.</p>
<p>The default pure python implementation is <code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.protocol.ProtocolHandler</span></code>.</p>
<p>When compiled with Cython, there are also built-in faster alternatives. See <a class="reference internal" href="../protocol/#faster-deser"><span class="std std-ref">Faster Deserialization</span></a></p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>statement[, parameters][, timeout][, trace][, custom_payload][, paging_state][, host][, execute_as]</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the given query and synchronously wait for the response.</p>
<p>If an error is encountered while executing the query, an Exception
will be raised.</p>
<p><cite>query</cite> may be a query string or an instance of <a class="reference internal" href="../query/#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.query.Statement</span></code></a>.</p>
<p><cite>parameters</cite> may be a sequence or dict of parameters to bind.  If a
sequence is used, <code class="docutils literal notranslate"><span class="pre">%s</span></code> should be used the placeholder for each
argument.  If a dict is used, <code class="docutils literal notranslate"><span class="pre">%(name)s</span></code> style placeholders must
be used.</p>
<p><cite>timeout</cite> should specify a floating-point timeout (in seconds) after
which an <a class="reference internal" href="../#cassandra.OperationTimedOut" title="cassandra.OperationTimedOut"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OperationTimedOut</span></code></a> exception will be raised if the query
has not completed.  If not set, the timeout defaults to the request_timeout of the selected <code class="docutils literal notranslate"><span class="pre">execution_profile</span></code>.
If set to <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>, there is no timeout. Please see <a class="reference internal" href="#cassandra.cluster.ResponseFuture.result" title="cassandra.cluster.ResponseFuture.result"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResponseFuture.result()</span></code></a> for details on
the scope and effect of this timeout.</p>
<p>If <cite>trace</cite> is set to <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>, the query will be sent with tracing enabled.
The trace details can be obtained using the returned <a class="reference internal" href="#cassandra.cluster.ResultSet" title="cassandra.cluster.ResultSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultSet</span></code></a> object.</p>
<p><cite>custom_payload</cite> is a <a class="reference internal" href="../protocol/#custom-payload"><span class="std std-ref">Custom Payloads</span></a> dict to be passed to the server.
If <cite>query</cite> is a Statement with its own custom_payload. The message payload
will be a union of the two, with the values specified here taking precedence.</p>
<p><cite>execution_profile</cite> is the execution profile to use for this request. It can be a key to a profile configured
via <a class="reference internal" href="#cassandra.cluster.Cluster.add_execution_profile" title="cassandra.cluster.Cluster.add_execution_profile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Cluster.add_execution_profile()</span></code></a> or an instance (from <a class="reference internal" href="#cassandra.cluster.Session.execution_profile_clone_update" title="cassandra.cluster.Session.execution_profile_clone_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execution_profile_clone_update()</span></code></a>,
for example</p>
<p><cite>paging_state</cite> is an optional paging state, reused from a previous <a class="reference internal" href="#cassandra.cluster.ResultSet" title="cassandra.cluster.ResultSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultSet</span></code></a>.</p>
<p><cite>host</cite> is the <a class="reference internal" href="../pool/#cassandra.pool.Host" title="cassandra.pool.Host"><code class="xref py py-class docutils literal notranslate"><span class="pre">cassandra.pool.Host</span></code></a> that should handle the query. If the host specified is down or
not yet connected, the query will fail with <a class="reference internal" href="#cassandra.cluster.NoHostAvailable" title="cassandra.cluster.NoHostAvailable"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoHostAvailable</span></code></a>. Using this is
discouraged except in a few cases, e.g., querying node-local tables and applying schema changes.</p>
<p><cite>execute_as</cite> the user that will be used on the server to execute the request. This is only available
on a DSE cluster.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.execute_async">
<code class="descname">execute_async</code><span class="sig-paren">(</span><em>statement[, parameters][, trace][, custom_payload][, paging_state][, host][, execute_as]</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.execute_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.execute_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the given query and return a <a class="reference internal" href="#cassandra.cluster.ResponseFuture" title="cassandra.cluster.ResponseFuture"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseFuture</span></code></a> object
which callbacks may be attached to for asynchronous response
delivery.  You may also call <a class="reference internal" href="#cassandra.cluster.ResponseFuture.result" title="cassandra.cluster.ResponseFuture.result"><code class="xref py py-meth docutils literal notranslate"><span class="pre">result()</span></code></a>
on the <a class="reference internal" href="#cassandra.cluster.ResponseFuture" title="cassandra.cluster.ResponseFuture"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseFuture</span></code></a> to synchronously block for results at
any time.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a> for parameter definitions.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute_async</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM mycf&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">log_results</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Results: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">log_error</span><span class="p">(</span><span class="n">exc</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Operation failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span><span class="o">.</span><span class="n">add_callbacks</span><span class="p">(</span><span class="n">log_results</span><span class="p">,</span> <span class="n">log_error</span><span class="p">)</span>
</pre></div>
</div>
<p>Async execution with blocking wait for results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">future</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute_async</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM mycf&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># do other stuff...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">results</span> <span class="o">=</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Operation failed:&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.execute_graph">
<code class="descname">execute_graph</code><span class="sig-paren">(</span><em>statement[, parameters][, trace][, execution_profile=EXEC_PROFILE_GRAPH_DEFAULT][, execute_as]</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.execute_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.execute_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a Gremlin query string or GraphStatement synchronously,
and returns a ResultSet from this execution.</p>
<p><cite>parameters</cite> is dict of named parameters to bind. The values must be
JSON-serializable.</p>
<p><cite>execution_profile</cite>: Selects an execution profile for the request.</p>
<p><cite>execute_as</cite> the user that will be used on the server to execute the request.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.execute_graph_async">
<code class="descname">execute_graph_async</code><span class="sig-paren">(</span><em>statement[, parameters][, trace][, execution_profile=EXEC_PROFILE_GRAPH_DEFAULT][, execute_as]</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.execute_graph_async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.execute_graph_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the graph query and return a <a class="reference internal" href="#cassandra.cluster.ResponseFuture" title="cassandra.cluster.ResponseFuture"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseFuture</span></code></a>
object which callbacks may be attached to for asynchronous response delivery. You may also call <code class="docutils literal notranslate"><span class="pre">ResponseFuture.result()</span></code> to synchronously block for
results at any time.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.prepare">
<code class="descname">prepare</code><span class="sig-paren">(</span><em>statement</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares a query string, returning a <a class="reference internal" href="../query/#cassandra.query.PreparedStatement" title="cassandra.query.PreparedStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">PreparedStatement</span></code></a>
instance which can be used as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;mykeyspace&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;INSERT INTO users (id, name, age) VALUES (?, ?, ?)&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prepared</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">prepared</span><span class="p">,</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="p">))</span>
</pre></div>
</div>
<p>Or you may bind values to the prepared statement ahead of time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prepared</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bound_stmt</span> <span class="o">=</span> <span class="n">prepared</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">bound_stmt</span><span class="p">)</span>
</pre></div>
</div>
<p>Of course, prepared statements may (and should) be reused:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prepared</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">bound</span> <span class="o">=</span> <span class="n">prepared</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">bound</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, if <a class="reference internal" href="#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> is 5 or higher
(requires Cassandra 4.0+), the keyspace can be specified as a
parameter. This will allow you to avoid specifying the keyspace in the
query without specifying a keyspace in <a class="reference internal" href="#cassandra.cluster.Cluster.connect" title="cassandra.cluster.Cluster.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect()</span></code></a>. It
even will let you prepare and use statements against a keyspace other
than the one originally specified on connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">analyticskeyspace_prepared</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;INSERT INTO user_activity id, last_activity VALUES (?, ?)&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">keyspace</span><span class="o">=</span><span class="s2">&quot;analyticskeyspace&quot;</span><span class="p">)</span>  <span class="c1"># note the different keyspace</span>
</pre></div>
</div>
<p><strong>Important</strong>: PreparedStatements should be prepared only once.
Preparing the same query more than once will likely affect performance.</p>
<p><cite>custom_payload</cite> is a key value map to be passed along with the prepare
message. See <a class="reference internal" href="../protocol/#custom-payload"><span class="std std-ref">Custom Payloads</span></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all connections.  <code class="docutils literal notranslate"><span class="pre">Session</span></code> instances should not be used
for any purpose after being shutdown.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.set_keyspace">
<code class="descname">set_keyspace</code><span class="sig-paren">(</span><em>keyspace</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.set_keyspace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.set_keyspace" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the default keyspace for all queries made through this Session.
This operation blocks until complete.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.get_execution_profile">
<code class="descname">get_execution_profile</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.get_execution_profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.get_execution_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the execution profile associated with the provided <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – The name (or key) of the execution profile.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.execution_profile_clone_update">
<code class="descname">execution_profile_clone_update</code><span class="sig-paren">(</span><em>ep</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.execution_profile_clone_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.execution_profile_clone_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a clone of the <code class="docutils literal notranslate"><span class="pre">ep</span></code> profile.  <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> can be specified to update attributes
of the returned profile.</p>
<p>This is a shallow clone, so any objects referenced by the profile are shared. This means Load Balancing Policy
is maintained by inclusion in the active profiles. It also means updating any other rich objects will be seen
by the active profile. In cases where this is not desirable, be sure to replace the instance instead of manipulating
the shared object.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.add_request_init_listener">
<code class="descname">add_request_init_listener</code><span class="sig-paren">(</span><em>fn</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.add_request_init_listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.add_request_init_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a callback with arguments to be called when any request is created.</p>
<p>It will be invoked as <cite>fn(response_future, *args, **kwargs)</cite> after each client request is created,
and before the request is sent. This can be used to create extensions by adding result callbacks to the
response future.</p>
<p><cite>response_future</cite> is the <a class="reference internal" href="#cassandra.cluster.ResponseFuture" title="cassandra.cluster.ResponseFuture"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseFuture</span></code></a> for the request.</p>
<p>Note that the init callback is done on the client thread creating the request, so you may need to consider
synchronization if you have multiple threads. Any callbacks added to the response future will be executed
on the event loop thread, so the normal advice about minimizing cycles and avoiding blocking apply (see Note in
<a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_callbacks" title="cassandra.cluster.ResponseFuture.add_callbacks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResponseFuture.add_callbacks()</span></code></a>.</p>
<p>See <a class="reference external" href="https://github.com/datastax/python-driver/blob/master/examples/request_init_listener.py">this example</a> in the
source tree for an example.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.Session.remove_request_init_listener">
<code class="descname">remove_request_init_listener</code><span class="sig-paren">(</span><em>fn</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#Session.remove_request_init_listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.Session.remove_request_init_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a callback and arguments from the list.</p>
<p>See <a class="reference internal" href="#cassandra.cluster.Session.add_request_init_listener" title="cassandra.cluster.Session.add_request_init_listener"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.add_request_init_listener()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.cluster.ResponseFuture">
<em class="property">class </em><code class="descclassname">cassandra.cluster.</code><code class="descname">ResponseFuture</code><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResponseFuture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResponseFuture" title="Permalink to this definition">¶</a></dt>
<dd><p>An asynchronous response delivery mechanism that is returned from calls
to <a class="reference internal" href="#cassandra.cluster.Session.execute_async" title="cassandra.cluster.Session.execute_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute_async()</span></code></a>.</p>
<dl class="docutils">
<dt>There are two ways for results to be delivered:</dt>
<dd><ul class="first last simple">
<li>Synchronously, by calling <a class="reference internal" href="#cassandra.cluster.ResponseFuture.result" title="cassandra.cluster.ResponseFuture.result"><code class="xref py py-meth docutils literal notranslate"><span class="pre">result()</span></code></a></li>
<li>Asynchronously, by attaching callback and errback functions via
<a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_callback" title="cassandra.cluster.ResponseFuture.add_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_callback()</span></code></a>, <a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_errback" title="cassandra.cluster.ResponseFuture.add_errback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_errback()</span></code></a>, and
<a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_callbacks" title="cassandra.cluster.ResponseFuture.add_callbacks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_callbacks()</span></code></a>.</li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="cassandra.cluster.ResponseFuture.query">
<code class="descname">query</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.ResponseFuture.query" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../query/#cassandra.query.Statement" title="cassandra.query.Statement"><code class="xref py py-class docutils literal notranslate"><span class="pre">Statement</span></code></a> instance that is being executed through this
<a class="reference internal" href="#cassandra.cluster.ResponseFuture" title="cassandra.cluster.ResponseFuture"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResponseFuture</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResponseFuture.result">
<code class="descname">result</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResponseFuture.result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResponseFuture.result" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the final result or raise an Exception if errors were
encountered.  If the final result or error has not been set
yet, this method will block until it is set, or the timeout
set for the request expires.</p>
<p>Timeout is specified in the Session request execution functions.
If the timeout is exceeded, an <a class="reference internal" href="../#cassandra.OperationTimedOut" title="cassandra.OperationTimedOut"><code class="xref py py-exc docutils literal notranslate"><span class="pre">cassandra.OperationTimedOut</span></code></a> will be raised.
This is a client-side timeout. For more information
about server-side coordinator timeouts, see <a class="reference internal" href="../policies/#cassandra.policies.RetryPolicy" title="cassandra.policies.RetryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">policies.RetryPolicy</span></code></a>.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">future</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute_async</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM mycf&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># do other stuff...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">rows</span> <span class="o">=</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
<span class="gp">... </span>        <span class="o">...</span> <span class="c1"># process results</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Operation failed:&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResponseFuture.get_query_trace">
<code class="descname">get_query_trace</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResponseFuture.get_query_trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResponseFuture.get_query_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches and returns the query trace of the last response, or <cite>None</cite> if tracing was
not enabled.</p>
<p>Note that this may raise an exception if there are problems retrieving the trace
details from Cassandra. If the trace is not available after <cite>max_wait</cite>,
<a class="reference internal" href="../query/#cassandra.query.TraceUnavailable" title="cassandra.query.TraceUnavailable"><code class="xref py py-exc docutils literal notranslate"><span class="pre">cassandra.query.TraceUnavailable</span></code></a> will be raised.</p>
<p>If the ResponseFuture is not done (async execution) and you try to retrieve the trace,
<a class="reference internal" href="../query/#cassandra.query.TraceUnavailable" title="cassandra.query.TraceUnavailable"><code class="xref py py-exc docutils literal notranslate"><span class="pre">cassandra.query.TraceUnavailable</span></code></a> will be raised.</p>
<p><cite>query_cl</cite> is the consistency level used to poll the trace tables.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResponseFuture.get_all_query_traces">
<code class="descname">get_all_query_traces</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResponseFuture.get_all_query_traces"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResponseFuture.get_all_query_traces" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches and returns the query traces for all query pages, if tracing was enabled.</p>
<p>See note in <a class="reference internal" href="#cassandra.cluster.ResponseFuture.get_query_trace" title="cassandra.cluster.ResponseFuture.get_query_trace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_query_trace()</span></code></a> regarding possible exceptions.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ResponseFuture.custom_payload">
<code class="descname">custom_payload</code><a class="headerlink" href="#cassandra.cluster.ResponseFuture.custom_payload" title="Permalink to this definition">¶</a></dt>
<dd><p>The custom payload returned from the server, if any. This will only be
set by Cassandra servers implementing a custom QueryHandler, and only
for protocol_version 4+.</p>
<p>Ensure the future is complete before trying to access this property
(call <a class="reference internal" href="#cassandra.cluster.ResponseFuture.result" title="cassandra.cluster.ResponseFuture.result"><code class="xref py py-meth docutils literal notranslate"><span class="pre">result()</span></code></a>, or after callback is invoked).
Otherwise it may throw if the response has not been received.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="../protocol/#custom-payload"><span class="std std-ref">Custom Payloads</span></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ResponseFuture.is_schema_agreed">
<code class="descname">is_schema_agreed</code><em class="property"> = True</em><a class="headerlink" href="#cassandra.cluster.ResponseFuture.is_schema_agreed" title="Permalink to this definition">¶</a></dt>
<dd><p>For DDL requests, this may be set <code class="docutils literal notranslate"><span class="pre">False</span></code> if the schema agreement poll after the response fails.</p>
<p>Always <code class="docutils literal notranslate"><span class="pre">True</span></code> for non-DDL requests.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ResponseFuture.has_more_pages">
<code class="descname">has_more_pages</code><a class="headerlink" href="#cassandra.cluster.ResponseFuture.has_more_pages" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code> if there are more pages left in the
query results, <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code> otherwise.  This should only
be checked after the first page has been returned.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ResponseFuture.warnings">
<code class="descname">warnings</code><a class="headerlink" href="#cassandra.cluster.ResponseFuture.warnings" title="Permalink to this definition">¶</a></dt>
<dd><p>Warnings returned from the server, if any. This will only be
set for protocol_version 4+.</p>
<p>Warnings may be returned for such things as oversized batches,
or too many tombstones in slice queries.</p>
<p>Ensure the future is complete before trying to access this property
(call <a class="reference internal" href="#cassandra.cluster.ResponseFuture.result" title="cassandra.cluster.ResponseFuture.result"><code class="xref py py-meth docutils literal notranslate"><span class="pre">result()</span></code></a>, or after callback is invoked).
Otherwise it may throw if the response has not been received.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResponseFuture.start_fetching_next_page">
<code class="descname">start_fetching_next_page</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResponseFuture.start_fetching_next_page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResponseFuture.start_fetching_next_page" title="Permalink to this definition">¶</a></dt>
<dd><p>If there are more pages left in the query result, this asynchronously
starts fetching the next page.  If there are no pages left, <a class="reference internal" href="#cassandra.cluster.QueryExhausted" title="cassandra.cluster.QueryExhausted"><code class="xref py py-exc docutils literal notranslate"><span class="pre">QueryExhausted</span></code></a>
is raised.  Also see <a class="reference internal" href="#cassandra.cluster.ResponseFuture.has_more_pages" title="cassandra.cluster.ResponseFuture.has_more_pages"><code class="xref py py-attr docutils literal notranslate"><span class="pre">has_more_pages</span></code></a>.</p>
<p>This should only be called after the first page has been returned.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResponseFuture.add_callback">
<code class="descname">add_callback</code><span class="sig-paren">(</span><em>fn</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResponseFuture.add_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResponseFuture.add_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches a callback function to be called when the final results arrive.</p>
<p>By default, <cite>fn</cite> will be called with the results as the first and only
argument.  If <cite>*args</cite> or <cite>**kwargs</cite> are supplied, they will be passed
through as additional positional or keyword arguments to <cite>fn</cite>.</p>
<p>If an error is hit while executing the operation, a callback attached
here will not be called.  Use <a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_errback" title="cassandra.cluster.ResponseFuture.add_errback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_errback()</span></code></a> or <a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_callbacks" title="cassandra.cluster.ResponseFuture.add_callbacks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_callbacks()</span></code></a>
if you wish to handle that case.</p>
<p>If the final result has already been seen when this method is called,
the callback will be called immediately (before this method returns).</p>
<p>Note: in the case that the result is not available when the callback is added,
the callback is executed by IO event thread. This means that the callback
should not block or attempt further synchronous requests, because no further
IO will be processed until the callback returns.</p>
<p><strong>Important</strong>: if the callback you attach results in an exception being
raised, <strong>the exception will be ignored</strong>, so please ensure your
callback handles all error cases that you care about.</p>
<p>Usage example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;mykeyspace&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">handle_results</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">start_time</span><span class="p">,</span> <span class="n">should_log</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">should_log</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Total time: </span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute_async</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM users&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span><span class="o">.</span><span class="n">add_callback</span><span class="p">(</span><span class="n">handle_results</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">should_log</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResponseFuture.add_errback">
<code class="descname">add_errback</code><span class="sig-paren">(</span><em>fn</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResponseFuture.add_errback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResponseFuture.add_errback" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_callback" title="cassandra.cluster.ResponseFuture.add_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_callback()</span></code></a>, but handles error cases.
An Exception instance will be passed as the first positional argument
to <cite>fn</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResponseFuture.add_callbacks">
<code class="descname">add_callbacks</code><span class="sig-paren">(</span><em>callback</em>, <em>errback</em>, <em>callback_args=()</em>, <em>callback_kwargs=None</em>, <em>errback_args=()</em>, <em>errback_args=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResponseFuture.add_callbacks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResponseFuture.add_callbacks" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenient combination of <a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_callback" title="cassandra.cluster.ResponseFuture.add_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_callback()</span></code></a> and
<a class="reference internal" href="#cassandra.cluster.ResponseFuture.add_errback" title="cassandra.cluster.ResponseFuture.add_errback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_errback()</span></code></a>.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM mycf&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute_async</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">log_results</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;debug&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">log</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="s2">&quot;Result: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">log_error</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Query &#39;</span><span class="si">%s</span><span class="s2">&#39; failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span><span class="o">.</span><span class="n">add_callbacks</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">callback</span><span class="o">=</span><span class="n">log_results</span><span class="p">,</span> <span class="n">callback_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;info&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="n">errback</span><span class="o">=</span><span class="n">log_error</span><span class="p">,</span> <span class="n">errback_args</span><span class="o">=</span><span class="p">(</span><span class="n">query</span><span class="p">,))</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cassandra.cluster.ResultSet">
<em class="property">class </em><code class="descclassname">cassandra.cluster.</code><code class="descname">ResultSet</code><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResultSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResultSet" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator over the rows from a query result. Also supplies basic equality
and indexing methods for backward-compatability. These methods materialize
the entire result set (loading all pages), and should only be used if the
total result size is understood. Warnings are emitted when paged results
are materialized in this fashion.</p>
<p>You can treat this as a normal iterator over rows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cassandra.query</span> <span class="kn">import</span> <span class="n">SimpleStatement</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">statement</span> <span class="o">=</span> <span class="n">SimpleStatement</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM users&quot;</span><span class="p">,</span> <span class="n">fetch_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">user_row</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">process_user</span><span class="p">(</span><span class="n">user_row</span><span class="p">)</span>
</pre></div>
</div>
<p>Whenever there are no more rows in the current page, the next page will
be fetched transparently.  However, note that it <em>is</em> possible for
an <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code> to be raised while fetching the next page, just
like you might see on a normal call to <code class="docutils literal notranslate"><span class="pre">session.execute()</span></code>.</p>
<dl class="attribute">
<dt id="cassandra.cluster.ResultSet.has_more_pages">
<code class="descname">has_more_pages</code><a class="headerlink" href="#cassandra.cluster.ResultSet.has_more_pages" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the last response indicated more pages; False otherwise</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ResultSet.current_rows">
<code class="descname">current_rows</code><a class="headerlink" href="#cassandra.cluster.ResultSet.current_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of current page rows. May be empty if the result was empty,
or this is the last page.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResultSet.all">
<code class="descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResultSet.all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResultSet.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all the remaining rows as a list. This is basically
a convenient shortcut to <cite>list(result_set)</cite>.</p>
<p>This function is not recommended for queries that return a large number of elements.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResultSet.one">
<code class="descname">one</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResultSet.one"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResultSet.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a single row of the results or None if empty. This is basically
a shortcut to <cite>result_set.current_rows[0]</cite> and should only be used when
you know a query returns a single row. Consider using an iterator if the
ResultSet contains more than one row.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResultSet.fetch_next_page">
<code class="descname">fetch_next_page</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResultSet.fetch_next_page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResultSet.fetch_next_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually, synchronously fetch the next page. Supplied for manually retrieving pages
and inspecting <code class="xref py py-meth docutils literal notranslate"><span class="pre">current_page()</span></code>. It is not necessary to call this when iterating
through results; paging happens implicitly in iteration.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResultSet.get_query_trace">
<code class="descname">get_query_trace</code><span class="sig-paren">(</span><em>max_wait_sec=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResultSet.get_query_trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResultSet.get_query_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the last query trace from the associated future.
See <a class="reference internal" href="#cassandra.cluster.ResponseFuture.get_query_trace" title="cassandra.cluster.ResponseFuture.get_query_trace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResponseFuture.get_query_trace()</span></code></a> for details.</p>
</dd></dl>

<dl class="method">
<dt id="cassandra.cluster.ResultSet.get_all_query_traces">
<code class="descname">get_all_query_traces</code><span class="sig-paren">(</span><em>max_wait_sec_per=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/cassandra/cluster/#ResultSet.get_all_query_traces"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.ResultSet.get_all_query_traces" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all query traces from the associated future.
See <a class="reference internal" href="#cassandra.cluster.ResponseFuture.get_all_query_traces" title="cassandra.cluster.ResponseFuture.get_all_query_traces"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResponseFuture.get_all_query_traces()</span></code></a> for details.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ResultSet.was_applied">
<code class="descname">was_applied</code><a class="headerlink" href="#cassandra.cluster.ResultSet.was_applied" title="Permalink to this definition">¶</a></dt>
<dd><p>For LWT results, returns whether the transaction was applied.</p>
<p>Result is indeterminate if called on a result that was not an LWT request or on
a <a class="reference internal" href="../query/#cassandra.query.BatchStatement" title="cassandra.query.BatchStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">query.BatchStatement</span></code></a> containing LWT. In the latter case either all the batch
succeeds or fails.</p>
<p>Only valid when one of the of the internal row factories is in use.</p>
</dd></dl>

<dl class="attribute">
<dt id="cassandra.cluster.ResultSet.paging_state">
<code class="descname">paging_state</code><a class="headerlink" href="#cassandra.cluster.ResultSet.paging_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Server paging state of the query. Can be <cite>None</cite> if the query was not paged.</p>
<p>The driver treats paging state as opaque, but it may contain primary key data, so applications may want to
avoid sending this to untrusted parties.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="cassandra.cluster.QueryExhausted">
<em class="property">exception </em><code class="descclassname">cassandra.cluster.</code><code class="descname">QueryExhausted</code><a class="reference internal" href="../../../_modules/cassandra/cluster/#QueryExhausted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.QueryExhausted" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when <a class="reference internal" href="#cassandra.cluster.ResponseFuture.start_fetching_next_page" title="cassandra.cluster.ResponseFuture.start_fetching_next_page"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResponseFuture.start_fetching_next_page()</span></code></a> is called and
there are no more pages.  You can check <a class="reference internal" href="#cassandra.cluster.ResponseFuture.has_more_pages" title="cassandra.cluster.ResponseFuture.has_more_pages"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ResponseFuture.has_more_pages</span></code></a>
before calling to avoid this.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="exception">
<dt id="cassandra.cluster.NoHostAvailable">
<em class="property">exception </em><code class="descclassname">cassandra.cluster.</code><code class="descname">NoHostAvailable</code><a class="reference internal" href="../../../_modules/cassandra/cluster/#NoHostAvailable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.NoHostAvailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when an operation is attempted but all connections are
busy, defunct, closed, or resulted in errors when used.</p>
<dl class="attribute">
<dt id="cassandra.cluster.NoHostAvailable.errors">
<code class="descname">errors</code><em class="property"> = None</em><a class="headerlink" href="#cassandra.cluster.NoHostAvailable.errors" title="Permalink to this definition">¶</a></dt>
<dd><p>A map of the form <code class="docutils literal notranslate"><span class="pre">{ip:</span> <span class="pre">exception}</span></code> which details the particular
Exception that was caught for each host the operation was attempted
against.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="cassandra.cluster.UserTypeDoesNotExist">
<em class="property">exception </em><code class="descclassname">cassandra.cluster.</code><code class="descname">UserTypeDoesNotExist</code><a class="reference internal" href="../../../_modules/cassandra/cluster/#UserTypeDoesNotExist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cassandra.cluster.UserTypeDoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>An attempt was made to use a user-defined type that does not exist.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.0.</span></p>
</div>
</dd></dl>

</div>

        </div>

        <div id="sidebar" class="large-3 large-pull-6 columns"><div class="side-nav">
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../"><code class="docutils literal notranslate"><span class="pre">cassandra</span></code> - Exceptions and Enums</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> - Clusters and Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../policies/"><code class="docutils literal notranslate"><span class="pre">cassandra.policies</span></code> - Load balancing and Failure Handling Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth/"><code class="docutils literal notranslate"><span class="pre">cassandra.auth</span></code> - Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graph/"><code class="docutils literal notranslate"><span class="pre">cassandra.graph</span></code> - Graph Statements, Options, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata/"><code class="docutils literal notranslate"><span class="pre">cassandra.metadata</span></code> - Schema and Ring Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics/"><code class="docutils literal notranslate"><span class="pre">cassandra.metrics</span></code> - Performance Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query/"><code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code> - Prepared Statements, Batch Statements, Tracing, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pool/"><code class="docutils literal notranslate"><span class="pre">cassandra.pool</span></code> - Hosts and Connection Pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocol/"><code class="docutils literal notranslate"><span class="pre">cassandra.protocol</span></code> - Protocol Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../encoder/"><code class="docutils literal notranslate"><span class="pre">cassandra.encoder</span></code> - Encoders for non-prepared Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decoder/"><code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> - Data Return Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concurrent/"><code class="docutils literal notranslate"><span class="pre">cassandra.concurrent</span></code> - Utilities for Concurrent Statement Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connection/"><code class="docutils literal notranslate"><span class="pre">cassandra.connection</span></code> - Low Level Connection Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../util/"><code class="docutils literal notranslate"><span class="pre">cassandra.util</span></code> - Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timestamps/"><code class="docutils literal notranslate"><span class="pre">cassandra.timestamps</span></code> - Timestamp Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/asyncioreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.asyncioreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/asyncorereactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.asyncorereactor</span></code> - <code class="docutils literal notranslate"><span class="pre">asyncore</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/eventletreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.eventletreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">eventlet</span></code>-compatible Connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/libevreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.libevreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">libev</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/geventreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.geventreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">gevent</span></code>-compatible Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io/twistedreactor/"><code class="docutils literal notranslate"><span class="pre">cassandra.io.twistedreactor</span></code> - Twisted Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/models/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.models</span></code> - Table models for object mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/columns/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.columns</span></code> - Column types for object mapping models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/query/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.query</span></code> - Query and filter model objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/connection/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.connection</span></code> - Connection management for cqlengine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/management/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.management</span></code> - Schema management for cqlengine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cqlengine/usertype/"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.usertype</span></code> - Model classes for User Defined Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastax/graph/"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph</span></code> - Graph Statements, Options, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastax/graph/fluent/"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastax/graph/fluent/query/"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent.query</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../datastax/graph/fluent/predicates/"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent.predicates</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scylla_specific/">Scylla Specific Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../upgrading/">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../execution_profiles/">Execution Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance/">Performance Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../query_paging/">Paging Large Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../lwt/">Lightweight Transactions (Compare-and-set)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_defined_types/">User Defined Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../object_mapper/">Object Mapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dates_and_times/">Working with Dates and Times</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/">Frequently Asked Questions</a></li>
</ul>

</div>
        </div>

        <div class="large-3 columns">
            
        </div>

    </div>
</section>

<!-- newsleter modal -->

<div id="newsletter_signup" class="reveal-modal tiny radius dark_modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
    <a class="close-reveal-modal" aria-label="Close">×</a>
    <h2 id="modalTitle">Sign up for the Scylla newsletter</h2>
    <div id="mc_embed_signup">
        <form action="//cloudius-systems.us10.list-manage.com/subscribe/post?u=df8bb543c68230d5f7b4dcf78&amp;id=9a4589f144" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">

                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-EMAIL">Email</label></div>
                        <div class="small-9 columns"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-FNAME">First Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="FNAME" class="" id="mce-FNAME"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-LNAME">Last Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="LNAME" class="" id="mce-LNAME"></div>
                    </div>
                </div>
                <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_df8bb543c68230d5f7b4dcf78_9a4589f144" tabindex="-1" value=""></div>
                <div class="clear"><input type="submit" class="button" value="Sign up" name="subscribe" id="mc-embedded-subscribe"></div>
            </div>
        </form>
    </div>
</div>

<!-- end newsleter modal -->



<!-- footer.html -->
<footer id="footer">
    <div class="footer-top">
        <a class="logo" href="https://www.scylladb.com"><img src="../../../_static/img/logo-scylla-horizontal-RGB.svg" alt=""></a>
        <div class="footer-links">
            <a class="link" href="https://docs.scylladb.com">Docs</a>
            <a class="link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
            <a class="link" href="https://www.scylladb.com/company/">About Us</a>
            <a class="link button" href="https://github.com/scylladb/python-driver/issues/new?title=Issue in page <code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> - Clusters and Sessions&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20http://docs.scylladb.com/api/cassandra/cluster%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix" target="_blank">
                Report an issue on this page</a>
        </div>
        <div class="footer-actions">
            <a class="link-icon" href="https://github.com/ScyllaDB" target="_blank">
                <span class="icon-github2"></span></a>
            <a class="link-icon" href="https://twitter.com/ScyllaDB" target="_blank">
                <span class="icon-twitter"></span></a>
            <a class="link-icon" href="https://www.linkedin.com/company/scylladb"  target="_blank">
                <span class="icon-linkedin2"></span></a>
            <a class="link-icon" href="https://www.facebook.com/scylladb/" target="_blank">
                <span class="icon-facebook"></span></a>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="footer-info">
            <div class="footer-copyright">
                &#169; 2013-2017 DataStax
            </div>
        </div>
        <div class="footer-links">
        </div>
    </div>
</footer>
<!-- end footer.html -->

<!-- bodyscripts.html -->
<!-- at the end of the BODY --> 
<script src="../../../_static/js/vendor/jquery.js"></script>
<script src="../../../_static/expertrec.js"></script>
<script src="../../../_static/js/foundation/foundation.js"></script>
<script src="../../../_static/js/foundation/foundation.topbar.js"></script>
<script src="../../../_static/app.js"></script>
<script>
    $(document).foundation();
</script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <!-- end bodyscripts.html -->
</body>
</html>